{"ast":null,"code":"export default {\n  data() {\n    return {\n      email: '',\n      password: '',\n      password2: '',\n      phone_number: '',\n      errors: [],\n      watcherMsg: [],\n      eStyle: null,\n      nStyle: null,\n      pStyle: null,\n      passStyle: null\n    };\n  },\n\n  watch: {\n    email(value) {\n      // binding this to the data value in the email input  \n      this.email = value;\n      this.validateEmail(value);\n    },\n\n    phone_number(value) {\n      this.phone_number = value;\n      this.validatePhoneNumber(value);\n    },\n\n    password(value) {\n      this.password = value;\n      this.validatePassword(value);\n    },\n\n    password2(value) {\n      this.password2 = value;\n      this.validatePasswordConfirmation(value);\n    }\n\n  },\n  methods: {\n    validateEmail(value) {\n      if (/^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/.test(value)) {\n        this.watcherMsg['email'] = '';\n        this.eStyle = 'green';\n      } else {\n        if (value == '') {\n          this.watcherMsg['email'] = '';\n          this.eStyle = '';\n        } else {\n          this.watcherMsg['email'] = 'Invalid Email Address';\n          this.eStyle = 'red';\n        }\n      }\n    },\n\n    validatePhoneNumber(value) {\n      if (/^(?:254|\\+254|0)?((?:(?:7(?:(?:[01249][0-9])|(?:5[789])|(?:6[89])))|(?:1(?:[1][0-5])))[0-9]{6})$/.test(value) || /^(?:254|\\+254|0)?((?:(?:7(?:(?:3[0-9])|(?:5[0-6])|(8[5-9])))|(?:1(?:[0][0-2])))[0-9]{6})$/.test(value)) {\n        this.nStyle = 'green';\n        this.watcherMsg['phone_number'] = 'Invalid phone number';\n      } else {\n        if (value == '') {\n          this.nStyle = '';\n          this.watcherMsg['phone_number'] = '';\n        } else {\n          this.nStyle = 'red';\n          this.watcherMsg['phone_number'] = 'Invalid phone number';\n        }\n      }\n    },\n\n    validatePassword(value) {\n      if (value.length > 0 && value.length < 8) {\n        this.watcherMsg['password'] = 'Must be a minimum of 8 characters!';\n        this.pStyle = 'red';\n      } else {\n        if (value.length == 0) {\n          this.watcherMsg['password'] = '';\n          this.pStyle = '';\n        } else {\n          this.pStyle = 'green';\n          this.watcherMsg['password'] = '';\n        }\n      }\n    },\n\n    validatePasswordConfirmation(value) {\n      if (value === this.password) {\n        this.passStyle = 'green';\n        this.watcherMsg['password2'] = '';\n      } else {\n        this.watcherMsg['password2'] = 'The passwords do not match';\n        this.passStyle = 'red';\n      }\n    },\n\n    createUser() {\n      this.errors = [];\n\n      if (this.email === '' && this.password === '' && this.password2 === '' && this.phone_number === '') {\n        this.errors.push('Please fill in the details!');\n      } else {\n        if (this.email === '') {\n          this.errors.push('Email is missing');\n        }\n\n        if (this.phone_number === '') {\n          this.errors.push('Phone number required');\n        }\n\n        if (this.password === '') {\n          this.errors.push('Password is too short');\n        }\n\n        if (this.password2 === '') {\n          this.errors.push('Please confirm your password');\n        }\n\n        if (this.password !== this.password2) {\n          this.errors.push('Passwords do not match');\n          this.password2 = '';\n        }\n      }\n\n      if (!this.errors.length) {\n        let formData = new FormData();\n        formData.append('email', this.email);\n        formData.append('password', this.password);\n        formData.append('phone_number', this.phone_number);\n        this.axios.post('/api/v1/users/', formData).then(response => {\n          this.$toast.success('Account created succesfully, verification link sent to your email. Please verify', {\n            duration: 10000,\n            dismissible: true\n          });\n          this.$router.push('/login');\n        }).catch(error => {\n          if (error.response) {\n            for (const property in error.response.data) {\n              this.errors.push(`${property}: ${error.response.data[property]}`);\n            }\n\n            console.log(JSON.stringify(error.response.data));\n          } else if (error.message) {\n            this.errors.push('Something went wrong. Please try again');\n            console.log(JSON.stringify(error));\n          }\n        });\n      }\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["data","email","password","password2","phone_number","errors","watcherMsg","eStyle","nStyle","pStyle","passStyle","watch","value","validateEmail","validatePhoneNumber","validatePassword","validatePasswordConfirmation","methods","test","length","createUser","push","formData","FormData","append","axios","post","then","response","$toast","success","duration","dismissible","$router","catch","error","property","console","log","JSON","stringify","message"],"sourceRoot":"","sources":["/home/sammyb/gee_collections/gee_collections_vue/src/views/RegisterView.vue"],"sourcesContent":["<template>\n    <div class=\"register\">\n        <!-- Breadcrumb Start -->\n        <div class=\"breadcrumb-wrap\">\n            <div class=\"container-fluid\">\n                <ul class=\"breadcrumb\">\n                    <li class=\"breadcrumb-item\"><router-link to=\"/\">Home</router-link></li>\n                    <li class=\"breadcrumb-item active\">Register</li>\n                </ul>\n            </div>\n        </div>\n        <!-- Breadcrumb End -->\n        \n        <!-- Login Start -->\n        <div class=\"login\">\n            <div class=\"container-fluid\">\n                <div class=\"row\">\n                    <div class=\"col-lg-12\">\n                        <form @submit.prevent=\"createUser\">    \n                            <div class=\"register-form\">\n                            <h1 style=\"text-align: center; margin-bottom: 20px;\">Sign Up</h1>\n                                <div class=\"row\">\n                                    <div class=\"col-md-6\">\n                                        <label>E-mail<em>*</em></label>\n                                        <input class=\"form-control\" type=\"email\" placeholder=\"E-mail\" v-model=\"email\" :style=\"{borderColor: eStyle }\" required>\n                                        <span v-if=\"watcherMsg.email\" :style=\"{color: eStyle, fontSize:10 + 'px'}\">{{watcherMsg.email}}</span>\n                                    </div>\n                                    <div class=\"col-md-6\">\n                                        <label>Mobile No<em>*</em></label>\n                                        <input class=\"form-control\" type=\"text\" placeholder=\"e.g 07XXXXXXXX\" v-model=\"phone_number\" :style=\"{borderColor: nStyle }\" required>\n                                    </div>\n                                    <div class=\"col-md-6\">\n                                        <label>Password<em>*</em></label>\n                                        <input class=\"form-control\" type=\"password\" placeholder=\"Password\" v-model=\"password\" :style=\"{borderColor: pStyle }\" required>\n                                        <span v-if=\"watcherMsg.password\" :style=\"{color: pStyle }\">{{watcherMsg.password}}</span>\n                                    </div>\n                                    <div class=\"col-md-6\">\n                                        <label>Confirm Password<em>*</em></label>\n                                        <input class=\"form-control\" type=\"password\" placeholder=\"Password\" v-model=\"password2\" :style=\"{borderColor: passStyle }\" required>\n                                        <span v-if=\"watcherMsg.password2\" :style=\"{color: passStyle }\">{{watcherMsg.password2}}</span>\n                                    </div>\n                                    <div class=\"col-md-12 notification is-danger\" v-if=\"errors.length\">\n                                        <p style=\"color: red;\" v-for=\"error in errors\" v-bind:key=\"error\">{{ error }}</p>\n                                    </div>\n                                    <div class=\"col-md-12 btn-submit\">\n                                        <button class=\"btn submit-btn\">Sign Up</button>\n                                    </div>\n                                </div>\n                            </div>\n                        </form>\n                    </div>\n                    \n                </div>\n            </div>\n        </div>\n        <!-- Login End -->\n    </div>\n</template>\n\n<script>\nexport default {\n    data(){\n        return{\n            email: '',\n            password: '',\n            password2: '',\n            phone_number: '',\n            errors:[],\n            watcherMsg:[],\n            eStyle: null,\n            nStyle: null,\n            pStyle: null,\n            passStyle: null\n        }\n    },\n    watch: {\n        email(value){\n        // binding this to the data value in the email input  \n        this.email = value; \n        this.validateEmail(value);\n        },\n        phone_number(value){\n            this.phone_number = value;\n            this.validatePhoneNumber(value)\n        },\n        password(value){\n            this.password = value;\n            this.validatePassword(value)\n        },\n        password2(value){\n            this.password2 = value;\n            this.validatePasswordConfirmation(value)\n        }\n    },\n    methods:{\n        validateEmail(value){  \n            if (/^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/.test(value)){ \n                this.watcherMsg['email'] = '';\n                this.eStyle = 'green'\n            } else{\n                if(value == ''){\n                    this.watcherMsg['email'] = ''; \n                    this.eStyle = ''                   \n                }\n                else{\n                    this.watcherMsg['email'] = 'Invalid Email Address'; \n                    this.eStyle = 'red'\n                }\n            }  \n        }, \n        validatePhoneNumber(value){\n            if ((/^(?:254|\\+254|0)?((?:(?:7(?:(?:[01249][0-9])|(?:5[789])|(?:6[89])))|(?:1(?:[1][0-5])))[0-9]{6})$/.test(value))|| (/^(?:254|\\+254|0)?((?:(?:7(?:(?:3[0-9])|(?:5[0-6])|(8[5-9])))|(?:1(?:[0][0-2])))[0-9]{6})$/.test(value))){\n                    this.nStyle = 'green';\n                    this.watcherMsg['phone_number'] = 'Invalid phone number'\n\n            }else{\n                if(value == ''){\n                    this.nStyle = '';\n                    this.watcherMsg['phone_number'] = ''                        \n                }\n                else{\n                    this.nStyle = 'red';\n                    this.watcherMsg['phone_number'] = 'Invalid phone number'\n                }\n            }\n        },\n        validatePassword(value){\n            if (value.length > 0 && value.length < 8){\n                this.watcherMsg['password'] = 'Must be a minimum of 8 characters!'\n                this.pStyle = 'red'\n            }else{\n                if(value.length == 0){\n                   this.watcherMsg['password'] = ''\n                   this.pStyle = ''\n                }\n            else{\n                    this.pStyle = 'green'\n                    this.watcherMsg['password'] = ''\n                }\n            }\n        }, \n        validatePasswordConfirmation(value){\n            if (value === this.password){\n                this.passStyle = 'green'\n                this.watcherMsg['password2'] = ''\n            }else{\n                this.watcherMsg['password2'] = 'The passwords do not match'\n                this.passStyle = 'red'\n            }\n        },      \n        createUser(){\n            this.errors = []\n            if(this.email === ''&&this.password === ''&&this.password2 === ''&& this.phone_number===''){\n                this.errors.push('Please fill in the details!')\n            }else{\n                if(this.email === ''){\n                    this.errors.push('Email is missing')\n                }\n                if(this.phone_number === ''){\n                    this.errors.push('Phone number required')\n                }\n                if(this.password === ''){\n                    this.errors.push('Password is too short')\n                }\n                if(this.password2 === ''){\n                    this.errors.push('Please confirm your password')\n                }\n                if(this.password !== this.password2){\n                    this.errors.push('Passwords do not match')\n                    this.password2 = ''\n                }\n            }\n\n            if(!this.errors.length){\n                let formData = new FormData();\n                formData.append('email', this.email);\n                formData.append('password', this.password);\n                formData.append('phone_number', this.phone_number)\n\n                this.axios.post('/api/v1/users/', formData)\n                .then((response)=>{\n                    this.$toast.success('Account created succesfully, verification link sent to your email. Please verify',{\n                        duration: 10000,\n                        dismissible: true\n                    })\n                    this.$router.push('/login');\n                })\n                .catch((error)=>{\n                    if (error.response) {\n                        for (const property in error.response.data) {\n                            this.errors.push(`${property}: ${error.response.data[property]}`)\n                        }\n                        console.log(JSON.stringify(error.response.data))\n                    } else if (error.message) {\n                        this.errors.push('Something went wrong. Please try again')\n                        console.log(JSON.stringify(error))\n                    }\n                })\n            }\n            \n        }\n    }\n}\n</script>\n\n<style scoped>\n    .container-fluid{\n        width:80%;\n    }\n    .btn-submit{\n        text-align: center;\n    }\n    .submit-btn{\n        width: 30%;\n    }\n    em{\n        color: red;\n    }\n    input{\n        font-weight: 300;\n        color: black;\n    }\n</style>"]},"metadata":{},"sourceType":"module"}