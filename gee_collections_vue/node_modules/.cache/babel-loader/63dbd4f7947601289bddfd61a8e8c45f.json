{"ast":null,"code":"export default {\n  props: ['getUserDetails', 'userDetails'],\n\n  data() {\n    return {\n      id: '',\n      first_name: '',\n      last_name: '',\n      email: '',\n      phone_number: '',\n      birthdate: '',\n      address: '',\n      county: '',\n      city: '',\n      gender: '',\n      errors: [],\n      myOrders: [],\n      is_paid: ''\n    };\n  },\n\n  methods: {\n    showClientOrders() {\n      this.axios.get('api/v1/my-orders/').then(response => {\n        this.myOrders = response.data;\n\n        for (let i = 0; i < this.myOrders.length; i++) {\n          this.is_paid = response.data[i].paid;\n        }\n\n        console.log(this.myOrders);\n        console.log(this.is_paid);\n      }).catch(error => {\n        console.log(error);\n      });\n    },\n\n    postProfileData() {\n      this.errors = [];\n\n      if (this.first_name === '' && this.last_name === '' && this.birthdate === '' && this.gender === '' && this.city === '' && this.county === '' && this.address === '') {\n        this.errors.push('Please fill in the details!');\n      } else {\n        if (this.first_name === '' || this.last_name === '' || this.birthdate === '' || this.gender === '' || this.city === '' || this.county === '' || this.address === '') {\n          this.errors.push('Some details are missing!');\n        }\n      }\n\n      if (!this.errors.length) {\n        let formData = {\n          first_name: this.first_name,\n          last_name: this.last_name,\n          birthdate: this.birthdate,\n          address: this.address,\n          county: this.county,\n          city: this.city,\n          gender: this.gender,\n          phone_number: this.phone_number,\n          email: this.email\n        };\n        this.axios.put('/api/v1/user-list/' + this.id + '/', formData).then(response => {\n          console.log(response.data);\n          this.$toast.success('Profile Succesfully Updated', {\n            duration: 5000,\n            dismissible: true\n          });\n          this.$router.push('/my-account');\n        }).catch(error => {\n          console.log(error);\n        });\n      }\n    },\n\n    getProfileDetails() {\n      this.axios.get('/api/v1/users/me/').then(response => {\n        console.log(response.data);\n        this.phone_number = response.data.phone_number;\n        this.email = response.data.email;\n        this.id = response.data.id;\n        this.first_name = response.data.first_name;\n        this.last_name = response.data.last_name;\n        this.gender = response.data.gender;\n        this.city = response.data.city;\n        this.county = response.data.county;\n        this.birthdate = response.data.birthdate;\n        this.address = response.data.address;\n      }).catch(error => {});\n    }\n\n  },\n\n  beforeMount() {},\n\n  mounted() {\n    this.getProfileDetails();\n    this.showClientOrders();\n  }\n\n};","map":{"version":3,"mappings":"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","names":["props","data","id","first_name","last_name","email","phone_number","birthdate","address","county","city","gender","errors","myOrders","is_paid","methods","showClientOrders","axios","get","then","response","i","length","paid","console","log","catch","error","postProfileData","push","formData","put","$toast","success","duration","dismissible","$router","getProfileDetails","beforeMount","mounted"],"sourceRoot":"","sources":["/home/sammyb/gee_collections/gee_collections_vue/src/views/AccountView.vue"],"sourcesContent":["<template>\n    <div class=\"my-account\">\n<!-- Breadcrumb Start -->\n        <div class=\"breadcrumb-wrap\">\n            <div class=\"container-fluid\">\n                <ul class=\"breadcrumb\">\n                    <li class=\"breadcrumb-item\"><router-link to=\"/\">Home</router-link></li>\n                    <li class=\"breadcrumb-item active\">My Account</li>\n                </ul>\n            </div>\n        </div>\n        <!-- Breadcrumb End -->\n        \n        <!-- My Account Start -->\n        <div class=\"my-account\">\n            <div class=\"container-fluid\">\n                <div class=\"row\">\n                    <div class=\"col-md-3\">\n                        <div class=\"nav flex-column nav-pills\" role=\"tablist\" aria-orientation=\"vertical\">\n                            <a class=\"nav-link active\" id=\"dashboard-nav\" data-toggle=\"pill\" href=\"#dashboard-tab\" role=\"tab\"><i class=\"fa fa-tachometer-alt\"></i>Dashboard</a>\n                            <a class=\"nav-link\" id=\"orders-nav\" data-toggle=\"pill\" href=\"#orders-tab\" role=\"tab\"><i class=\"fa fa-shopping-bag\"></i>Orders</a>\n                            <a class=\"nav-link\" id=\"payment-nav\" data-toggle=\"pill\" href=\"#payment-tab\" role=\"tab\"><i class=\"fa fa-credit-card\"></i>Payment Method</a>\n                            <a class=\"nav-link\" id=\"address-nav\" data-toggle=\"pill\" href=\"#address-tab\" role=\"tab\"><i class=\"fa fa-map-marker-alt\"></i>Address</a>\n                            <a class=\"nav-link\" id=\"account-nav\" data-toggle=\"pill\" href=\"#account-tab\" role=\"tab\"><i class=\"fa fa-user\"></i>Account Details</a>\n                            <router-link to=\"/logout\" class=\"nav-link\"><i class=\"fa fa-sign-out-alt\"></i>Logout</router-link>\n                        </div>\n                    </div>\n                    <div class=\"col-md-9\">\n                        <div class=\"tab-content\">\n                            <div class=\"tab-pane fade show active\" id=\"dashboard-tab\" role=\"tabpanel\" aria-labelledby=\"dashboard-nav\">\n                                <h4>Dashboard</h4>\n                                <p>\n                                Hello {{this.first_name}}, we're very excited to have you on board. Gee Collections appreciates your contribution towards \n                                assisting us grow us a brand. We could not make it this far without you, always feel free to leave a suggestion so that we can \n                                provide you with quality services. Thank you.\n                                </p> \n                            </div>\n                            <div class=\"tab-pane fade\" id=\"orders-tab\" role=\"tabpanel\" aria-labelledby=\"orders-nav\">\n                                <div class=\"table-responsive\">\n                                    <table class=\"table table-bordered\">\n                                        <thead class=\"thead-dark\">\n                                            <tr>\n                                                <th>#</th>\n                                                <th>Date</th>\n                                                <th>Order Total</th>\n                                                <th>Status</th>\n                                                <th>Action</th>\n                                            </tr>\n                                        </thead>\n                                        <tbody>\n                                            <tr v-for=\"order,index in myOrders\" :key=\"index\">\n                                                <td>{{order.id}}</td>\n                                                <td>{{order.created_at.substring(0,10)}}</td>\n                                                <td>ksh {{order.order_total}}</td>\n                                                <td v-if=\"is_paid\">Paid</td>\n                                                <td><button class=\"btn\">View</button></td>\n                                            </tr>\n                                        </tbody>\n                                    </table>\n                                </div>\n                            </div>\n                            <div class=\"tab-pane fade\" id=\"payment-tab\" role=\"tabpanel\" aria-labelledby=\"payment-nav\">\n                                <h4>Payment Method</h4>\n                                <p>\n                                    Lorem ipsum dolor sit amet, consectetur adipiscing elit. In condimentum quam ac mi viverra dictum. In efficitur ipsum diam, at dignissim lorem tempor in. Vivamus tempor hendrerit finibus. Nulla tristique viverra nisl, sit amet bibendum ante suscipit non. Praesent in faucibus tellus, sed gravida lacus. Vivamus eu diam eros. Aliquam et sapien eget arcu rhoncus scelerisque.\n                                </p> \n                            </div>\n                            <div class=\"tab-pane fade\" id=\"address-tab\" role=\"tabpanel\" aria-labelledby=\"address-nav\">\n                                <h4>Address</h4>\n                                <div class=\"row\">\n                                    <div class=\"col-md-6\">\n                                        <h5>Payment Address</h5>\n                                        <p>123 Payment Street, Los Angeles, CA</p>\n                                        <p>Mobile: 012-345-6789</p>\n                                        <button class=\"btn\">Edit Address</button>\n                                    </div>\n                                    <div class=\"col-md-6\">\n                                        <h5>Shipping Address</h5>\n                                        <p>123 Shipping Street, Los Angeles, CA</p>\n                                        <p>Mobile: 012-345-6789</p>\n                                        <button class=\"btn\">Edit Address</button>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class=\"tab-pane fade\" id=\"account-tab\" role=\"tabpanel\" aria-labelledby=\"account-nav\">\n                                <h4>Account Details</h4>\n                                <form action=\"\" @submit.prevent=\"postProfileData\">\n                                    <div class=\"row\">\n                                        <div class=\"col-md-6\">\n                                            <input class=\"form-control\" type=\"text\" placeholder=\"First Name\" v-model=\"first_name\">\n                                        </div>\n                                        <div class=\"col-md-6\">\n                                            <input class=\"form-control\" type=\"text\" placeholder=\"Last Name\" v-model=\"last_name\">\n                                        </div>\n                                        <div class=\"col-md-6\">\n                                            <input class=\"form-control\" type=\"email\" placeholder=\"Email\" v-model=\"email\" disabled=\"true\">\n                                        </div>\n                                        <div class=\"col-md-6\">\n                                            <input class=\"form-control\" type=\"text\" placeholder=\"Mobile\" v-model=\"phone_number\">\n                                        </div>\n                                        <div class=\"col-md-6\">\n                                            <select name=\"gender\" class=\"form-control\" v-model=\"gender\">\n                                                <option value=\"\" disabled=\"true\">--Select your Gender--</option>\n                                                <option>Male</option>\n                                                <option>Female</option>\n                                                <option>Other</option>\n                                            </select>\n                                        </div>\n                                        <div class=\"col-md-6\">\n                                            <input class=\"form-control\" type=\"date\" placeholder=\"Date of Birth\" v-model=\"birthdate\">\n                                        </div>\n                                        <div class=\"col-md-6\">\n                                            <select name=\"city\" class=\"form-control\" v-model=\"city\">\n                                                <option value=\"\" disabled=\"true\">--Select your City--</option>\n                                                <option>Nairobi</option>\n                                                <option>Kisumu</option>\n                                                <option>Mombasa</option>\n                                                <option>Nakuru</option>\n                                            </select>\n                                        </div>\n                                        <div class=\"col-md-6\">\n                                            <select name=\"county\" class=\"form-control\" v-model=\"county\">\n                                                <option disabled=\"true\">--Select your County--</option>\n                                                <option>Siaya</option>\n                                                <option>Kisumu</option>\n                                                <option>Nairobi</option>\n                                                <option>Mombasa</option>\n                                            </select>\n                                        </div>\n                                        <div class=\"col-md-12\">\n                                            <input class=\"form-control\" type=\"text\" placeholder=\"Address\" v-model=\"address\">\n                                        </div>\n                                        <div class=\"col-md-12 notification is-danger\" v-if=\"errors.length\">\n                                            <p style=\"color: red;\" v-for=\"error in errors\" v-bind:key=\"error\">{{ error }}</p>\n                                        </div>\n                                        <div class=\"col-md-12\">\n                                            <button class=\"btn\">Update Account</button>\n                                            <br><br>\n                                        </div>\n                                    </div>\n                                </form>\n                                <h4>Password change</h4>\n                                <div class=\"row\">\n                                    <div class=\"col-md-12\">\n                                        <input class=\"form-control\" type=\"password\" placeholder=\"Current Password\">\n                                    </div>\n                                    <div class=\"col-md-6\">\n                                        <input class=\"form-control\" type=\"text\" placeholder=\"New Password\">\n                                    </div>\n                                    <div class=\"col-md-6\">\n                                        <input class=\"form-control\" type=\"text\" placeholder=\"Confirm Password\">\n                                    </div>\n                                    <div class=\"col-md-12\">\n                                        <button class=\"btn\">Save Changes</button>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <!-- My Account End -->\n    </div>\n</template>\n\n<script>\n\nexport default {\n    props:['getUserDetails','userDetails'],\n    data(){\n        return{\n            id:'',\n            first_name:'',\n            last_name: '',\n            email: '',\n            phone_number: '',\n            birthdate: '',\n            address: '',\n            county: '',\n            city: '',\n            gender: '',\n            errors:[],\n            myOrders: [],\n            is_paid: ''\n        }\n    },\n    methods:{\n        showClientOrders(){\n            this.axios.get('api/v1/my-orders/')\n            .then((response)=>{\n                this.myOrders = response.data\n                for(let i=0 ; i<this.myOrders.length ; i++){\n                    this.is_paid = response.data[i].paid\n                }\n                console.log(this.myOrders)\n                console.log(this.is_paid)\n            })\n            .catch((error)=>{\n                console.log(error)\n            })\n        },\n        postProfileData(){\n            this.errors = []\n            if(this.first_name ===''&&this.last_name ===''&&this.birthdate ===''&&this.gender ===''&&this.city ===''&&this.county ===''&&this.address ===''){\n                this.errors.push('Please fill in the details!')\n            }else{\n                if(this.first_name ===''||this.last_name ===''||this.birthdate ===''||this.gender ===''||this.city ===''||this.county ===''||this.address ===''){\n                this.errors.push('Some details are missing!')\n                }\n            }\n            if(!this.errors.length){\n                let formData = {\n                    first_name:this.first_name,\n                    last_name: this.last_name,\n                    birthdate: this.birthdate,\n                    address: this.address,\n                    county: this.county,\n                    city: this.city,\n                    gender: this.gender,    \n                    phone_number: this.phone_number,\n                    email: this.email               \n                }\n                this.axios.put('/api/v1/user-list/'+this.id+'/', formData)\n                .then((response)=>{\n                    console.log(response.data);\n                    this.$toast.success('Profile Succesfully Updated',{\n                        duration: 5000,\n                        dismissible: true\n                    })\n                    this.$router.push('/my-account');\n                })\n                .catch((error)=>{\n                    console.log(error);\n                })\n            }    \n        },\n        getProfileDetails(){\n            this.axios.get('/api/v1/users/me/')\n            .then((response)=>{\n                console.log(response.data)\n                this.phone_number = response.data.phone_number;\n                this.email = response.data.email;\n                this.id = response.data.id;\n                this.first_name = response.data.first_name\n                this.last_name = response.data.last_name\n                this.gender = response.data.gender\n                this.city = response.data.city\n                this.county = response.data.county\n                this.birthdate = response.data.birthdate\n                this.address = response.data.address\n            })\n            .catch((error)=>{\n\n            })\n        },    \n    },\n    beforeMount() {\n        \n    },\n    mounted(){\n        this.getProfileDetails()\n        this.showClientOrders()\n    }\n}\n</script>\n\n<style scoped>\n    input{\n        font-weight: 300;\n        color: black;\n    }\n    select{\n        font-weight: 300;\n        color: black;\n    }\n</style>"]},"metadata":{},"sourceType":"module"}