{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, withModifiers as _withModifiers, createStaticVNode as _createStaticVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"login\"\n};\nconst _hoisted_2 = {\n  class: \"breadcrumb-wrap\"\n};\nconst _hoisted_3 = {\n  class: \"container-fluid login-breadcrumb\"\n};\nconst _hoisted_4 = {\n  class: \"breadcrumb\"\n};\nconst _hoisted_5 = {\n  class: \"breadcrumb-item\"\n};\n\nconst _hoisted_6 = /*#__PURE__*/_createTextVNode(\"Home\");\n\nconst _hoisted_7 = /*#__PURE__*/_createElementVNode(\"li\", {\n  class: \"breadcrumb-item active\"\n}, \"Login\", -1\n/* HOISTED */\n);\n\nconst _hoisted_8 = {\n  class: \"login\"\n};\nconst _hoisted_9 = {\n  class: \"container-fluid user-login-container\"\n};\nconst _hoisted_10 = {\n  class: \"user-login-form\"\n};\nconst _hoisted_11 = {\n  class: \"col-md-6\"\n};\n\nconst _hoisted_12 = /*#__PURE__*/_createElementVNode(\"label\", null, \"Email\", -1\n/* HOISTED */\n);\n\nconst _hoisted_13 = {\n  class: \"col-md-6\"\n};\n\nconst _hoisted_14 = /*#__PURE__*/_createElementVNode(\"label\", null, \"Password\", -1\n/* HOISTED */\n);\n\nconst _hoisted_15 = {\n  key: 0,\n  class: \"col-md-12 notification is-danger\"\n};\n\nconst _hoisted_16 = /*#__PURE__*/_createStaticVNode(\"<div class=\\\"col-md-12\\\"><div class=\\\"custom-control custom-checkbox\\\"><input type=\\\"checkbox\\\" class=\\\"custom-control-input\\\" id=\\\"newaccount\\\"><label class=\\\"custom-control-label\\\" for=\\\"newaccount\\\">Keep me signed in</label></div></div><div class=\\\"col-md-12\\\"><button class=\\\"btn login-btn\\\">Login</button></div>\", 2);\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_router_link = _resolveComponent(\"router-link\");\n\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createCommentVNode(\" Breadcrumb Start \"), _createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"ul\", _hoisted_4, [_createElementVNode(\"li\", _hoisted_5, [_createVNode(_component_router_link, {\n    to: \"/\"\n  }, {\n    default: _withCtx(() => [_hoisted_6]),\n    _: 1\n    /* STABLE */\n\n  })]), _hoisted_7])])]), _createCommentVNode(\" Breadcrumb End \"), _createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"div\", _hoisted_9, [_createElementVNode(\"div\", _hoisted_10, [_createElementVNode(\"form\", {\n    action: \"\",\n    onSubmit: _cache[2] || (_cache[2] = _withModifiers((...args) => $options.userLogin && $options.userLogin(...args), [\"prevent\"]))\n  }, [_createElementVNode(\"div\", _hoisted_11, [_hoisted_12, _withDirectives(_createElementVNode(\"input\", {\n    class: \"form-control\",\n    type: \"email\",\n    placeholder: \"Enter your email\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.username = $event)\n  }, null, 512\n  /* NEED_PATCH */\n  ), [[_vModelText, $data.username]])]), _createElementVNode(\"div\", _hoisted_13, [_hoisted_14, _withDirectives(_createElementVNode(\"input\", {\n    class: \"form-control\",\n    type: \"password\",\n    placeholder: \"Password\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.password = $event)\n  }, null, 512\n  /* NEED_PATCH */\n  ), [[_vModelText, $data.password]])]), $data.errors.length ? (_openBlock(), _createElementBlock(\"div\", _hoisted_15, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.errors, error => {\n    return _openBlock(), _createElementBlock(\"p\", {\n      style: {\n        \"color\": \"red\"\n      },\n      key: error\n    }, _toDisplayString(error), 1\n    /* TEXT */\n    );\n  }), 128\n  /* KEYED_FRAGMENT */\n  ))])) : _createCommentVNode(\"v-if\", true), _hoisted_16], 32\n  /* HYDRATE_EVENTS */\n  )])])])]);\n}","map":{"version":3,"mappings":";;AACSA,OAAK,EAAC;;;AAEFA,OAAK,EAAC;;;AACFA,OAAK,EAAC;;;AACHA,OAAK,EAAC;;;AACFA,OAAK,EAAC;;;iDAAsC;;gCAChDC,oBAA6C,IAA7C,EAA6C;AAAzCD,OAAK,EAAC;AAAmC,CAA7C,EAAmC,OAAnC,EAAwC;AAAA;AAAxC;;;AAKPA,OAAK,EAAC;;;AACFA,OAAK,EAAC;;;AACFA,OAAK,EAAC;;;AAEEA,OAAK,EAAC;;;iCACPC,oBAAoB,OAApB,EAAoB,IAApB,EAAO,OAAP,EAAY;AAAA;AAAZ;;;AAGCD,OAAK,EAAC;;;iCACPC,oBAAuB,OAAvB,EAAuB,IAAvB,EAAO,UAAP,EAAe;AAAA;AAAf;;;;AAGCD,OAAK,EAAC;;;;;;;;uBAvB/BE,oBAuCM,KAvCN,cAuCM,CAtCFC,yCAsCE,EArCFF,oBAOM,KAPN,cAOM,CANFA,oBAKM,KALN,cAKM,CAJFA,oBAGK,IAHL,cAGK,CAFDA,oBAAuE,IAAvE,cAAuE,CAA3CG,aAAsCC,sBAAtC,EAAsC;AAAzBC,MAAE,EAAC;AAAsB,GAAtC,EAAmB;sBAAC,MAAI,aAAL;;;;AAAA,GAAnB,CAA2C,CAAvE,CAEC,EADDC,UACC,CAHL,CAIE,CALN,CAME,CAPN,CAqCE,EA7BFJ,uCA6BE,EA5BFF,oBA2BM,KA3BN,cA2BM,CA1BFA,oBAyBM,KAzBN,cAyBM,CAxBFA,oBAuBM,KAvBN,eAuBM,CAtBFA,oBAqBO,MArBP,EAqBO;AArBDO,UAAM,EAAC,EAqBN;AArBUC,YAAM,wDAAUC,iDAAV,EAAmB,WAAnB;AAqBhB,GArBP,GACIT,oBAGM,KAHN,eAGM,CAFFU,WAEE,kBADFV,oBAA2F,OAA3F,EAA2F;AAApFD,SAAK,EAAC,cAA8E;AAA/DY,QAAI,EAAC,OAA0D;AAAlDC,eAAW,EAAC,kBAAsC;+DAAVC,iBAAQC;AAAE,GAA3F;;AAAA,oBAAiFD,iBAC/E,CAHN,GAIAb,oBAGM,KAHN,eAGM,CAFFe,WAEE,kBADFf,oBAAsF,OAAtF,EAAsF;AAA/ED,SAAK,EAAC,cAAyE;AAA1DY,QAAI,EAAC,UAAqD;AAA1CC,eAAW,EAAC,UAA8B;+DAAVC,iBAAQC;AAAE,GAAtF;;AAAA,oBAA4ED,iBAC1E,CAHN,GAIoDA,aAAOG,wBAA3Df,oBAEM,KAFN,eAEM,oBADFA,oBAAiFgB,SAAjF,EAAiF,IAAjF,EAAiFC,YAA1CL,YAA0C,EAAnDM,KAAe,IAAV;yBAAnClB,oBAAiF,GAAjF,EAAiF;AAA9EmB,WAAmB,EAAnB;AAAA;AAAA,OAA8E;AAA3BC,SAAG,EAAEF;AAAsB,KAAjF,mBAAqEA,MAArE,EAA0E;AAAA;AAA1E;GAAiF,CAAjF;;AAAA,GACE,EAFN,wCAGAG,YAZJ;;AAAA,GAsBE,CAvBN,CAwBE,CAzBN,CA0BE,CA3BN,CA4BE,CAvCN","names":["class","_createElementVNode","_createElementBlock","_createCommentVNode","_createVNode","_component_router_link","to","_hoisted_7","action","onSubmit","$options","_hoisted_12","type","placeholder","$data","$event","_hoisted_14","length","_Fragment","_renderList","error","style","key","_hoisted_16"],"sourceRoot":"","sources":["/home/sammyb/gee_collections/gee_collections_vue/src/views/LoginView.vue"],"sourcesContent":["<template>\n    <div class=\"login\">\n        <!-- Breadcrumb Start -->\n        <div class=\"breadcrumb-wrap\">\n            <div class=\"container-fluid login-breadcrumb\">\n                <ul class=\"breadcrumb\">\n                    <li class=\"breadcrumb-item\"><router-link to=\"/\">Home</router-link></li>\n                    <li class=\"breadcrumb-item active\">Login</li>\n                </ul>\n            </div>\n        </div>\n        <!-- Breadcrumb End -->\n        <div class=\"login\">\n            <div class=\"container-fluid user-login-container\">\n                <div class=\"user-login-form\">\n                    <form action=\"\" @submit.prevent=\"userLogin\">\n                        <div class=\"col-md-6\">\n                            <label>Email</label>\n                            <input class=\"form-control\" type=\"email\" placeholder=\"Enter your email\" v-model=\"username\">\n                        </div>\n                        <div class=\"col-md-6\">\n                            <label>Password</label>\n                            <input class=\"form-control\" type=\"password\" placeholder=\"Password\" v-model=\"password\">\n                        </div>\n                        <div class=\"col-md-12 notification is-danger\" v-if=\"errors.length\">\n                            <p style=\"color: red;\" v-for=\"error in errors\" v-bind:key=\"error\">{{ error }}</p>\n                        </div>\n                        <div class=\"col-md-12\">\n                            <div class=\"custom-control custom-checkbox\">\n                                <input type=\"checkbox\" class=\"custom-control-input\" id=\"newaccount\">\n                                <label class=\"custom-control-label\" for=\"newaccount\">Keep me signed in</label>\n                            </div>\n                        </div>\n                        <div class=\"col-md-12\">\n                            <button class=\"btn login-btn\">Login</button>\n                        </div>\n                    </form>\n                </div>     \n            </div>\n        </div>    \n    </div>\n</template>\n\n<script>\nimport axios from 'axios'\nexport default {\n    props:['token','isAuthenticated'],\n    data(){\n        return{\n            username:'',\n            password: '',\n            errors: [],\n        }\n    },\n    methods:{\n        userLogin(){\n            this.errors = [];\n            if(this.username === '' && this.password === ''){\n                this.errors.push('Please fill in the details')\n                this.$toast.error('Invalid username and password', {\n                    duration: 3000\n                })\n            }else{\n                if(this.username ===''){\n                    this.errors.push('Please enter your email')\n                }\n                if(this.password === ''){\n                    this.errors.push('Please enter your password')\n                }\n            }\n\n            if(!this.errors.length){\n                const formData = {\n                    username: this.username,\n                    password: this.password\n                }\n\n                this.axios\n                    .post('/api/v1/token/login/', formData)\n                    .then((response)=>{\n                        console.log(response.data)\n                        const token = response.data.auth_token;       \n                        this.$store.commit('setToken', token);\n                        axios.defaults.headers.common['Authorization'] = \"Token \" + token\n                        localStorage.setItem('token',token)\n                        this.$toast.success('Login Succesful',{\n                            duration: 5000\n                        })\n                        this.$router.push('/')\n                    .catch((error)=>{\n                        if (error.response) {\n                            for (const property in error.response.data) {\n                                this.errors.push(`${property}: ${error.response.data[property]}`)\n                            }\n                            console.log(JSON.stringify(error.response.data))\n                        } else if (error.message) {\n                            this.errors.push('Something went wrong. Please try again')\n                            console.log(JSON.stringify(error))\n                        }\n                    })\n                })\n            }\n            \n        }\n    }\n}\n</script>\n\n<style>\n    .user-login-container{\n        width: 80%;\n    }\n    .login-breadcrumb{\n        width: 80%;\n    }\n    .login-btn{\n        width: 20%;\n    }\n    .login-form{\n        max-width: 80%;\n    }\n</style>"]},"metadata":{},"sourceType":"module"}