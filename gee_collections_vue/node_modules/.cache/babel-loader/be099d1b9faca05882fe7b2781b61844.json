{"ast":null,"code":"import Modal from \"@/components/Modal.vue\";\nimport Pagination from \"@/components/Pagination.vue\";\nimport DoughnutChart from \"@/components/DoughnutChart.vue\";\nexport default {\n  props: [\"getUserDetails\", \"userDetails\"],\n  components: {\n    Modal,\n    Pagination,\n    DoughnutChart\n  },\n\n  data() {\n    return {\n      id: \"\",\n      first_name: \"\",\n      last_name: \"\",\n      email: \"\",\n      phone_number: \"\",\n      birthdate: \"\",\n      address: \"\",\n      county: \"\",\n      city: \"\",\n      gender: \"\",\n      errors: [],\n      myOrders: [],\n      myOrderDetails: [],\n      isModalVisible: false,\n      isPayModalVisible: false,\n      paymentModalVisible: false,\n      lipaNaMpesa: false,\n      currentPage: 1,\n      totalItems: 0,\n      itemsPerPage: 2,\n      totalPages: 0,\n      start: 1,\n      limit: 2,\n      watcherMsg: [],\n      fnStyle: null,\n      lnStyle: null,\n      nStyle: null,\n      gStyle: null,\n      bWidth: null,\n      dStyle: null,\n      cStyle: null,\n      ccStyle: null,\n      aStyle: null,\n      pStyle: null,\n      p2Style: null,\n      rfStyle: null,\n      payment_number: '',\n      payment_number2: '',\n      mpesaRefs: [],\n      mpesaRef: '',\n      paymentConfirm: false,\n      myOrderID: '',\n      pageOfItems: [],\n      shippingAddress: false,\n      currentPassword: '',\n      newPassword: '',\n      newPassword2: '',\n      showPass: false,\n      passType: false,\n      showPass2: false,\n      pass2Type: false\n    };\n  },\n\n  watch: {\n    first_name(value) {\n      this.first_name = value;\n      this.validateFirstName(value);\n    },\n\n    last_name(value) {\n      this.last_name = value;\n      this.validateLastName(value);\n    },\n\n    phone_number(value) {\n      this.phone_number = value;\n      this.validatePhoneNumber(value);\n    },\n\n    gender(value) {\n      this.gender = value;\n      this.validateGender(value);\n    },\n\n    birthdate(value) {\n      this.birthdate = value;\n      this.validateBirthdate(value);\n    },\n\n    city(value) {\n      this.city = value;\n      this.validateCity(value);\n    },\n\n    county(value) {\n      this.county = value;\n      this.validateCounty(value);\n    },\n\n    address(value) {\n      this.address = value;\n      this.validateAddress(value);\n    },\n\n    payment_number(value) {\n      this.payment_number = value;\n      this.validatePaymentNumber(value);\n    },\n\n    payment_number2(value) {\n      this.payment_number2 = value;\n      this.confirmPaymentNumber(value);\n    },\n\n    mpesaRef(value) {\n      this.mpesaRef = value;\n      this.validatePaymentRef(value);\n    },\n\n    newPassword2(value) {\n      this.newPassword2 = value;\n      this.validatePassword2(value);\n    },\n\n    newPassword(value) {\n      this.newPassword = value;\n      this.validateNewPassword(value);\n    }\n\n  },\n  computed: {\n    orderItemTotal() {\n      let itemTotal = [];\n\n      for (let i = 0; i < this.myOrderDetails.items.length; i++) {\n        let lineTotal = (this.myOrderDetails.items[i].quantity * this.myOrderDetails.items[i].product.price).toFixed(2);\n        itemTotal.push(lineTotal);\n      }\n\n      return itemTotal;\n    }\n\n  },\n  methods: {\n    validateFirstName(value) {\n      if (value.length == 0) {\n        this.watcherMsg['first_name'] = '';\n        this.fnStyle = '';\n        this.bWidth = 1;\n      } else {\n        if (value.length > 0 && value.length < 3) {\n          this.watcherMsg['first_name'] = 'Name is too short';\n          this.fnStyle = 'red';\n          this.bWidth = 2;\n        } else {\n          if (/\\d/.test(value)) {\n            this.watcherMsg['first_name'] = 'Name should not contain a number';\n            this.fnStyle = 'red';\n            this.bWidth = 2;\n          } else {\n            this.watcherMsg['first_name'] = '';\n            this.fnStyle = 'green';\n            this.bWidth = 2;\n          }\n        }\n      }\n    },\n\n    validateLastName(value) {\n      if (value.length == 0) {\n        this.watcherMsg['last_name'] = '';\n        this.lnStyle = '';\n        this.bWidth = 1;\n      } else {\n        if (value.length > 0 && value.length < 3) {\n          this.watcherMsg['last_name'] = 'Name is too short';\n          this.lnStyle = 'red';\n          this.bWidth = 2;\n        } else {\n          if (/\\d/.test(value)) {\n            this.watcherMsg['last_name'] = 'Name should not contain a number';\n            this.lnStyle = 'red';\n            this.bWidth = 2;\n          } else {\n            this.watcherMsg['last_name'] = '';\n            this.lnStyle = 'green';\n            this.bWidth = 2;\n          }\n        }\n      }\n    },\n\n    validatePhoneNumber(value) {\n      if (value == '') {\n        this.nStyle = '';\n        this.watcherMsg['phone_number'] = '';\n      } else {\n        if (/^(?:254|\\+254|0)?((?:(?:7(?:(?:[01249][0-9])|(?:5[789])|(?:6[89])))|(?:1(?:[1][0-5])))[0-9]{6})$/.test(value) || /^(?:254|\\+254|0)?((?:(?:7(?:(?:3[0-9])|(?:5[0-6])|(8[5-9])))|(?:1(?:[0][0-2])))[0-9]{6})$/.test(value)) {\n          this.nStyle = 'green';\n          this.watcherMsg['phone_number'] = '';\n          this.bWidth = 2;\n        } else {\n          this.nStyle = 'red';\n          this.watcherMsg['phone_number'] = 'Invalid Phone Number';\n          this.bWidth = 2;\n        }\n      }\n    },\n\n    validateGender(value) {\n      if (value != '') {\n        this.gStyle = 'green';\n        this.bWidth = 2;\n      }\n    },\n\n    validateBirthdate(value) {\n      if (value != '') {\n        this.bStyle = 'green';\n        this.bWidth = 2;\n      }\n    },\n\n    validateCity(value) {\n      if (value != '') {\n        this.cStyle = 'green';\n        this.bWidth = 2;\n      }\n    },\n\n    validateCounty(value) {\n      if (value != '') {\n        this.ccStyle = 'green';\n        this.bWidth = 2;\n      }\n    },\n\n    validateAddress(value) {\n      if (value.length == 0) {\n        this.aStyle = '';\n        this.watcherMsg['address'] = '';\n      } else {\n        if (value.length > 0 && value.length < 3) {\n          this.watcherMsg['address'] = 'Address is too short';\n          this.aStyle = 'red';\n          this.bWidth = 2;\n        } else {\n          if (value != '' && value.length > 3) {\n            this.aStyle = 'green';\n            this.bWidth = 2;\n            this.watcherMsg['address'] = '';\n          }\n        }\n      }\n    },\n\n    validatePaymentNumber(value) {\n      if (value == '') {\n        this.watcherMsg['payment_number'] = '';\n        this.pStyle = '';\n        this.bWidth = 1;\n      } else {\n        if (/^(?:254)?((?:(?:7(?:(?:[01249][0-9])|(?:5[789])|(?:6[89])))|(?:1(?:[1][0-5])))[0-9]{6})$/.test(value)) {\n          this.watcherMsg['payment_number'] = '';\n          this.pStyle = 'green';\n          this.bWidth = 2;\n        } else {\n          this.watcherMsg['payment_number'] = 'Invalid Phone Number';\n          this.pStyle = 'red';\n          this.bWidth = 2;\n        }\n      }\n    },\n\n    confirmPaymentNumber(value) {\n      if (value == '') {\n        this.watcherMsg['payment_number2'] = '';\n        this.p2Style = '';\n        this.bWidth = 1;\n      } else {\n        if (value == this.payment_number) {\n          this.watcherMsg['payment_number2'] = '';\n          this.p2Style = 'green';\n          this.bWidth = 2;\n        } else {\n          this.watcherMsg['payment_number2'] = 'Invalid Phone Number';\n          this.p2Style = 'red';\n          this.bWidth = 2;\n        }\n      }\n    },\n\n    validatePaymentRef(value) {\n      if (value.length == 0) {\n        this.watcherMsg['mpesaRef'] = '';\n        this.rfStyle = '';\n        this.bWidth = 1;\n      } else {\n        if (value.length > 0 && value.length < 10) {\n          this.rfStyle = 'red';\n          this.watcherMsg['mpesaRef'] = 'Incomplete Reference Number';\n          this.bWidth = 2;\n        } else {\n          if (/^[A-Z0-9]$/.test(value)) {\n            this.rfStyle = 'green';\n            this.watcherMsg['mpesaRef'] = '';\n            this.bWidth = 2;\n          }\n        }\n      }\n    },\n\n    validateNewPassword(value) {\n      if (value.length == '') {\n        this.watcherMsg['newPassword'] = '';\n      } else {\n        if (value.length > 0 && value.length < 8) {\n          this.watcherMsg['newPassword'] = 'Password is too short';\n        } else {\n          this.watcherMsg['newPassword'] = '';\n        }\n      }\n    },\n\n    validatePassword2(value) {\n      if (value == this.newPassword) {\n        this.watcherMsg['newPassword2'] = '';\n      } else {\n        this.watcherMsg['newPassword2'] = 'Passwords do not match';\n      }\n    },\n\n    onChangePage(pageOfItems) {\n      // update page of items\n      this.pageOfItems = pageOfItems;\n    },\n\n    postProfileData() {\n      this.errors = [];\n\n      if (this.first_name === \"\" && this.last_name === \"\" && this.birthdate === \"\" && this.gender === \"\" && this.city === \"\" && this.county === \"\" && this.address === \"\") {\n        this.errors.push(\"Please fill in the details!\");\n      } else {\n        if (this.first_name === \"\" || this.last_name === \"\" || this.birthdate === \"\" || this.gender === \"\" || this.city === \"\" || this.county === \"\" || this.address === \"\") {\n          this.errors.push(\"Some details are missing!\");\n        }\n      }\n\n      if (!this.errors.length) {\n        let formData = {\n          first_name: this.first_name,\n          last_name: this.last_name,\n          birthdate: this.birthdate,\n          address: this.address,\n          county: this.county,\n          city: this.city,\n          gender: this.gender,\n          phone_number: this.phone_number,\n          email: this.email\n        };\n        this.axios.put(\"/api/v1/user-list/\" + this.id + \"/\", formData).then(response => {\n          this.$toast.success(\"Profile Succesfully Updated\", {\n            duration: 5000,\n            dismissible: true\n          });\n          this.fnStyle = '';\n          this.lnStyle = '';\n          this.gStyle = '';\n          this.cStyle = '';\n          this.ccStyle = '';\n          this.aStyle = '';\n          this.$router.push(\"/my-account\");\n        }).catch(error => {\n          console.log(error);\n        });\n      }\n    },\n\n    changePassword() {\n      let formData = {\n        password: this.newPassword\n      };\n      this.axios.patch(\"/api/v1/users/me/\", formData).then(response => {\n        console.log(response.data);\n        this.$toast.success('Password Changed Succesfully');\n        this.newPassword = '';\n        this.newPassword2 = '';\n        this.curreentPassword = '';\n        this.$store.commit('removeToken');\n        const token = this.$store.state.token;\n        localStorage.setItem('token', token);\n        this.$router.push('/login');\n      }).catch(error => {\n        console.log(error);\n      });\n    },\n\n    getProfileDetails() {\n      this.axios.get(\"/api/v1/users/me/\").then(response => {\n        this.phone_number = response.data.phone_number;\n        this.email = response.data.email;\n        this.id = response.data.id;\n        this.first_name = response.data.first_name;\n        this.last_name = response.data.last_name;\n        this.gender = response.data.gender;\n        this.city = response.data.city;\n        this.county = response.data.county;\n        this.birthdate = response.data.birthdate;\n        this.address = response.data.address;\n        this.currentPassword = response.data.password;\n      }).catch(error => {\n        console.log(error);\n      });\n    },\n\n    getMpesaPayments() {\n      this.mpesaRefs = [];\n      this.axios.get('api/v1/mpesa-payments/').then(response => {\n        for (let i = 0; i < response.data.length; i++) {\n          let trans_id = response.data[i].transaction_id;\n          this.mpesaRefs.push(trans_id);\n        }\n\n        this.isPayModalVisible = true;\n      }).catch(error => {\n        console.log(error);\n      });\n    },\n\n    confirmPayment() {\n      if (this.mpesaRefs.includes(this.mpesaRef)) {\n        let formData = {\n          paid: true,\n          payment_reference: this.mpesaRef\n        };\n        this.axios.patch(`/api/v1/my-orders/${this.myOrderID}/`, formData).then(response => {\n          this.$toast.success('Payment Confirmation Succesful', {\n            duration: 3000\n          });\n          this.mpesaRef = '';\n          this.payment_number2 = '';\n          this.$router.push('/my-account');\n          this.$store.commit('reloadingPage');\n        }).catch(error => {\n          console.log(error);\n        });\n      } else {\n        this.$toast.error('Invalid Reference Number', {\n          duration: 3000\n        });\n      }\n    },\n\n    showClientOrders() {\n      this.axios.get(\"api/v1/my-orders/\").then(response => {\n        this.myOrders = response.data;\n      }).catch(error => {\n        console.log(error);\n      });\n    },\n\n    showModal() {\n      this.isModalVisible = true;\n      let orderID = arguments[0];\n      this.axios.get(`/api/v1/my-orders/${orderID}/`).then(response => {\n        this.myOrderDetails = response.data;\n      }).catch(error => {\n        console.log(error);\n      });\n    },\n\n    showPaymentModal() {\n      this.paymentModalVisible = true;\n      let orderID = arguments[0];\n      this.axios.get(`/api/v1/my-orders/${orderID}/`).then(response => {\n        this.myOrderID = orderID;\n      }).catch(error => {\n        console.log(error);\n      });\n    },\n\n    closeModal() {\n      this.isModalVisible = false;\n      this.paymentModalVisible = false;\n    },\n\n    showLipaNaMpesa() {\n      this.lipaNaMpesa = !this.lipaNaMpesa;\n    },\n\n    showShippingAddress() {\n      this.shippingAddress = true;\n    },\n\n    payViaMpesa() {\n      this.paymentConfirm = true;\n      this.errors = [];\n\n      if (this.payment_number === '') {\n        this.errors.push('Please enter phone number');\n        this.$toast.error('Invalid phone number', {\n          duration: 3000\n        });\n      }\n\n      if (!this.errors.length && this.pStyle == 'green') {\n        let formData = {\n          'PartyA': this.payment_number,\n          'PhoneNumber': this.payment_number\n        };\n        this.axios.post('/api/v1/online/lipa2/', formData).then(response => {\n          console.log('lipa na mpesa response is ', response.data);\n          this.paymentConfirm = true;\n        }).catch(error => {\n          console.log(error);\n        }).finally(() => {});\n      }\n    },\n\n    showPassword() {\n      if (!this.showPass) {\n        this.showPass = true;\n        this.passType = true;\n      } else {\n        this.showPass = false;\n        this.passType = false;\n      }\n    },\n\n    showPassword2() {\n      if (!this.showPass2) {\n        this.showPass2 = true;\n        this.pass2Type = true;\n      } else {\n        this.showPass2 = false;\n        this.pass2Type = false;\n      }\n    },\n\n    printOrder() {\n      let orderID = arguments[0];\n      this.axios.get(`api/v1/view_pdf/${orderID}/`).then(response => {\n        console.log(response);\n      }).catch(error => {\n        console.log(error);\n      });\n    }\n\n  },\n\n  beforeMount() {},\n\n  mounted() {\n    this.getProfileDetails();\n    this.showClientOrders();\n    this.fnStyle = 'yellow', this.lnStyle = null, this.nStyle = null, this.gStyle = null, this.bWidth = null, this.dStyle = null, this.cStyle = null, this.ccStyle = null, this.aStyle = null, this.pStyle = null, this.p2Style = null, paypal.Buttons({\n      //Styling the paypal button\n      style: {\n        color: 'blue',\n        shape: 'pill',\n        label: 'pay',\n        height: 40\n      },\n      // Sets up the transaction when a payment button is clicked\n      createOrder: (data, actions) => {\n        return actions.order.create({\n          purchase_units: [{\n            amount: {\n              // value: this.cartTotalUSD // Can also reference a variable or function\n              value: 0.01\n            }\n          }]\n        });\n      },\n      // Finalize the transaction after payer approval\n      onApprove: (data, actions) => {\n        const my_action = actions.order.capture().then(function (orderData) {\n          // Successful capture! For dev/demo purposes:\n          console.log('Capture result', orderData, JSON.stringify(orderData, null, 2));\n          const transaction = orderData.purchase_units[0].payments.captures[0];\n          alert(`Transaction ${transaction.status}: ${transaction.id}\\n\\nSee console for all available details`); // this.placeOrder();\n          // When ready to go live, remove the alert and show a success message within this page. For example:\n          // const element = document.getElementById('paypal-button-container');\n          // element.innerHTML = '<h3>Thank you for your payment!</h3>';\n          // Or go to another URL:  actions.redirect('thank_you.html');\n        });\n        return my_action;\n      }\n    }).render('#paypal-button-container');\n  }\n\n};","map":{"version":3,"mappings":"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","names":["Modal","Pagination","DoughnutChart","props","components","data","id","first_name","last_name","email","phone_number","birthdate","address","county","city","gender","errors","myOrders","myOrderDetails","isModalVisible","isPayModalVisible","paymentModalVisible","lipaNaMpesa","currentPage","totalItems","itemsPerPage","totalPages","start","limit","watcherMsg","fnStyle","lnStyle","nStyle","gStyle","bWidth","dStyle","cStyle","ccStyle","aStyle","pStyle","p2Style","rfStyle","payment_number","payment_number2","mpesaRefs","mpesaRef","paymentConfirm","myOrderID","pageOfItems","shippingAddress","currentPassword","newPassword","newPassword2","showPass","passType","showPass2","pass2Type","watch","value","validateFirstName","validateLastName","validatePhoneNumber","validateGender","validateBirthdate","validateCity","validateCounty","validateAddress","validatePaymentNumber","confirmPaymentNumber","validatePaymentRef","validatePassword2","validateNewPassword","computed","orderItemTotal","itemTotal","i","items","length","lineTotal","quantity","product","price","toFixed","push","methods","test","bStyle","onChangePage","postProfileData","formData","axios","put","then","response","$toast","success","duration","dismissible","$router","catch","error","console","log","changePassword","password","patch","curreentPassword","$store","commit","token","state","localStorage","setItem","getProfileDetails","get","getMpesaPayments","trans_id","transaction_id","confirmPayment","includes","paid","payment_reference","showClientOrders","showModal","orderID","arguments","showPaymentModal","closeModal","showLipaNaMpesa","showShippingAddress","payViaMpesa","post","finally","showPassword","showPassword2","printOrder","beforeMount","mounted","paypal","Buttons","style","color","shape","label","height","createOrder","actions","order","create","purchase_units","amount","onApprove","my_action","capture","orderData","JSON","stringify","transaction","payments","captures","alert","status","render"],"sourceRoot":"","sources":["/home/sammyb/gee_collections/gee_collections_vue/src/views/AccountView.vue"],"sourcesContent":["<template>\n    <div class=\"my-account\">\n        <!-- Breadcrumb Start -->\n        <div class=\"breadcrumb-wrap\">\n            <div class=\"container-fluid\">\n                <ul class=\"breadcrumb\">\n                    <li class=\"breadcrumb-item\"><router-link to=\"/\">Home</router-link></li>\n                    <li class=\"breadcrumb-item active\">My Account</li>\n                </ul>\n            </div>\n        </div>\n        <!-- Breadcrumb End -->\n        \n        <!-- My Account Start -->\n        <div class=\"my-account\">\n            <div class=\"container-fluid\">\n                <div class=\"row\">\n                    <div class=\"col-md-3\">\n                        <div class=\"nav flex-column nav-pills\" role=\"tablist\" aria-orientation=\"vertical\">\n                            <a class=\"nav-link active\" id=\"dashboard-nav\" data-toggle=\"pill\" href=\"#dashboard-tab\" role=\"tab\"><i class=\"fa fa-tachometer-alt\"></i>Dashboard</a>\n                            <a class=\"nav-link\" id=\"orders-nav\" data-toggle=\"pill\" href=\"#orders-tab\" role=\"tab\"><i class=\"fa fa-shopping-bag\"></i>Orders</a>\n                            <a class=\"nav-link\" id=\"payment-nav\" data-toggle=\"pill\" href=\"#payment-tab\" role=\"tab\"><i class=\"fa fa-credit-card\"></i>Payment Method</a>\n                            <a class=\"nav-link\" id=\"address-nav\" data-toggle=\"pill\" href=\"#address-tab\" role=\"tab\"><i class=\"fa fa-map-marker-alt\"></i>Address</a>\n                            <a class=\"nav-link\" id=\"account-nav\" data-toggle=\"pill\" href=\"#account-tab\" role=\"tab\"><i class=\"fa fa-user\"></i>Account Details</a>\n                            <router-link to=\"/logout\" class=\"nav-link\"><i class=\"fa fa-sign-out-alt\"></i>Logout</router-link>\n                        </div>\n                    </div>\n                    <div class=\"col-md-9\">\n                        <div class=\"tab-content\">\n                            <div class=\"tab-pane fade show active\" id=\"dashboard-tab\" role=\"tabpanel\" aria-labelledby=\"dashboard-nav\">\n                                <h4>Dashboard</h4>\n                                <p>\n                                Hello {{this.first_name}}, we're very excited to have you on board. Gee Collections appreciates your contribution towards \n                                assisting us grow us a brand. We could not make it this far without you, always feel free to leave a suggestion so that we can \n                                provide you with quality services. Thank you.\n                                </p> \n                                <DoughnutChart/>\n                            </div>\n                            <div class=\"tab-pane fade\" id=\"orders-tab\" role=\"tabpanel\" aria-labelledby=\"orders-nav\">\n                                <div class=\"table-responsive\">\n                                    <table class=\"table table-bordered\">\n                                        <thead class=\"thead-dark\">\n                                            <tr>\n                                                <th>No</th>\n                                                <th>#ID</th>\n                                                <th>Date</th>\n                                                <th>Order Total</th>\n                                                <th>Status</th>\n                                                <th>Payment Ref</th>\n                                                <th>Action</th>\n                                                <!-- <th></th> -->\n                                            </tr>\n                                        </thead>\n                                        <tbody>\n                                            <tr v-for=\"order,index in pageOfItems\" :key=\"index\">\n                                                <td>{{index + 1}}</td>\n                                                <td>{{order.id.substring(0,7)}}</td>\n                                                <td>{{order.created_at.substring(0,10)}}</td>\n                                                <td>ksh {{Number(order.order_total).toLocaleString()}}</td>\n                                                <td v-if=\"order.paid\" style=\"color:green;\">Paid</td>\n                                                <td v-else style=\"color:red;\">Not Paid</td>\n                                                <td v-if=\"order.paid\">{{order.payment_reference}}</td>\n                                                <td v-else>-</td>\n                                                <td v-if=\"order.paid\"><button class=\"btn\" @click=\"showModal(order.id)\">View Order</button></td>\n                                                <td v-else><button class=\"btn\" @click=\"showPaymentModal(order.id)\">Make Payment</button></td>\n                                                <!-- <td><button class=\"btn\" @click=\"printOrder(order.id)\">Print</button></td> -->\n                                            </tr>\n                                        </tbody>\n                                    </table>\n\n                                    <p class=\"empty-order-list\" v-if=\"!Object.keys(myOrders).length\"><span class=\"emoji \" role=\"img\" aria-label=\"\">😭</span><br/><em class=\"empty-cart-message\">Ooops,You haven't placed any order yet</em></p>\n\n                                    <!-- PAGINATION -->\n                                    <div class=\"row\">\n                                        <Pagination\n                                            :items=\"myOrders\"\n                                            @changePage=\"onChangePage\"\n                                            :pageSize=5\n                                        />\n                                    </div>\n                                    <!-- pagination end -->\n                                </div>\n                            </div>\n                            <!-- MODAL component for viewing order details -->\n                            <Modal\n                            v-show=\"isModalVisible\"\n                            @close=\"closeModal\"\n                            > \n                            <template v-slot:header>\n                                My Order Details\n                            </template>\n\n                            <template v-slot:body>\n                            <div class=\"myorders-page\">\n                                <div class=\"table-responsive\">\n                                    <table class=\"table table-bordered\">\n                                        <thead class=\"thead-dark\">\n                                            <tr>\n                                                <th>Product</th>\n                                                <th>Price</th>\n                                                <th>Quantity</th>\n                                                <th>Total</th>\n                                            </tr>\n                                        </thead>\n                                        <tbody class=\"align-middle\">\n                                            <tr v-for=\"ordDet,index in myOrderDetails.items\" :key=\"index\">\n                                                <td>\n                                                    <div class=\"img\">\n                                                        <a href=\"#\"><img :src=\"`${ordDet.product.image}`\" alt=\"Image\"></a>                                                     \n                                                        <p>{{ordDet.product.name}}</p>\n                                                    </div>\n                                                </td>\n                                                <td>ksh. {{Number(ordDet.product.price).toLocaleString()}}</td>\n                                                <td>{{ordDet.quantity}}</td>\n                                                <td>ksh. {{Number(orderItemTotal[index]).toLocaleString()}}</td>\n                                            </tr>\n                                        </tbody>\n                                    </table>\n                                </div>\n                            </div>\n                            </template>\n\n                            <template v-slot:footer>\n                                Thank you for doing business with us.\n                            </template>\n                            </Modal>\n\n                            <!-- MODAL component for making payment -->\n                            <Modal\n                            v-show=\"paymentModalVisible\"\n                            @close=\"closeModal\"\n                            > \n                            <template v-slot:header>\n                                Payment Methods\n                            </template>\n\n                            <template v-slot:body>\n                                <div>\n                                    <button type=\"button\" class=\"lipanampesa\" @click=\"showLipaNaMpesa\">Lipa Na Mpesa</button>\n                                    <div v-if=\"lipaNaMpesa\">\n                                    <p>To proceed to Lipa Na Mpesa, please enter the phone number you would like to make the payment with.</p>\n                                    <label for=\"\">Phone Number:</label>\n                                    <input type=\"text\" class=\"form-control\" placeholder=\"e.g 2547XXXXXXXX\" v-model=\"payment_number\" :style=\"{borderColor: pStyle,borderWidth: bWidth+'px'}\">\n                                    <span v-if=\"watcherMsg.payment_number\" :style=\"{color: pStyle, fontSize:10 + 'px'}\">{{watcherMsg.payment_number}}</span>\n                                    <div class=\"col-md-12 notification is-danger\" v-if=\"errors.length\">\n                                        <p style=\"color: red;\" v-for=\"error in errors\" v-bind:key=\"error\">{{ error }}</p>\n                                    </div>\n                                    <button type=\"button\" class=\"procPayBtn\" @click=\"payViaMpesa\">Proceed to Pay</button>\n                                    <p v-if=\"paymentConfirm\">An mpesa prompt has been sent to the number entered above,enter your mpesa PIN then proceed to payment confirmation</p>\n                                    <button type=\"button\" class=\"procPayBtn\" @click=\"getMpesaPayments\" v-if=\"paymentConfirm\">Confirm Payment</button>\n                                    </div>\n                                </div>\n                                <!-- MODAL component for confirming payment -->\n                                <Modal\n                                v-show=\"isPayModalVisible\"\n                                @close=\"closeModal\"\n                                >\n                                <template v-slot:header>\n                                    M-Pesa Payment Confirmation\n                                </template>\n\n                                <template v-slot:body>\n                                <div>\n                                <p>Please confirm the details of your payments to succesfully place your order</p>\n                                <label for=\"\">Phone Number:</label>\n                                <input type=\"text\" class=\"form-control\" placeholder=\"e.g 2547XXXXXXXX\" v-model=\"payment_number2\" :style=\"{borderColor: p2Style,borderWidth: bWidth+'px'}\">\n                                <span v-if=\"watcherMsg.payment_number2\" :style=\"{color: p2Style, fontSize:10 + 'px'}\">{{watcherMsg.payment_number2}}</span>\n                                <label for=\"\">Reference Number:</label>\n                                <input type=\"text\" class=\"form-control\" placeholder=\"e.g QRYU0U***P1\" v-model=\"mpesaRef\" :style=\"{borderColor: rfStyle,borderWidth: bWidth+'px'}\">\n                                <span v-if=\"watcherMsg.mpesaRef\" :style=\"{color: rfStyle, fontSize:10 + 'px'}\">{{watcherMsg.mpesaRef}}</span>\n                                <button type=\"button\" class=\"procPayBtn\" @click=\"confirmPayment\">Confirm Payment</button>                                        \n                                </div>\n                                </template>\n\n                                <template v-slot:footer>\n                                    Thank you for doing business with us.\n                                </template>\n\n                                </Modal>\n                                <div id=\"paypal-button-container\"></div>\n                            </template>\n\n                            <template v-slot:footer>\n                                Thank you for doing business with us.\n                            </template>\n                            </Modal>\n                            <div class=\"tab-pane fade\" id=\"payment-tab\" role=\"tabpanel\" aria-labelledby=\"payment-nav\">\n                                <h4>Payment Method</h4>\n                                <div class=\"row payment-row\">\n                                    <div class=\"col-md-12\">\n                                        <h6 style=\"font-weight:700;\">Select from our popular payment options below</h6>\n                                    </div> \n                                    <div class=\"col-md-3 payment-card\">\n                                        <h6 style=\"font-weight:700;\">Bank Payment</h6>\n                                        <img src=\"@/assets/img/bank-icon.jpeg\" alt=\"Bank Icon\" class=\"bank-icon\">\n                                        <p>Make payments easily using your debit or credit card</p>\n                                        <button class=\"btn btn-payment-option\">Select Option</button>\n                                    </div>\n                                    <div class=\"col-md-3 payment-card\">\n                                        <h6 style=\"font-weight:700;\">Lipa Na M-pesa</h6>\n                                        <img src=\"@/assets/img/mpesa.jpeg\" alt=\"M-Pesa\"  class=\"mpesa-icon\">\n                                        <p>Make payments easily and efficiently using your M-pesa account</p>\n                                        <button class=\"btn btn-payment-option\">Select Option</button>\n                                    </div>\n                                    <div class=\"col-md-3 payment-card\">\n                                        <h6 style=\"font-weight:700;\">PayPal</h6>\n                                        <img src=\"@/assets/img/paypal-icon.png\" alt=\"PayPal\" class=\"paypal-icon\">\n                                        <p>Make payments easily and efficiently using your PayPal account</p>\n                                        <button class=\"btn btn-payment-option\">Select Option</button>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class=\"tab-pane fade\" id=\"address-tab\" role=\"tabpanel\" aria-labelledby=\"address-nav\">\n                                <h4>Address</h4>\n                                <div class=\"row\">\n                                    <div class=\"col-md-6\">\n                                        <h5>Payment Address</h5>\n                                        <p>123 Payment Street, Los Angeles, CA</p>\n                                        <p>Mobile: 012-345-6789</p>\n                                        <button class=\"btn\">Edit Address</button>\n                                    </div>\n                                    <div class=\"col-md-6\">\n                                        <h5>Shipping Address</h5>\n                                        <p>123 Shipping Street, Los Angeles, CA</p>\n                                        <p>Mobile: 012-345-6789</p>\n                                        <button class=\"btn\" @click=\"showShippingAddress()\">Edit Address</button>\n                                    </div>\n                                </div>\n                                <br><br>\n                                <div class=\"shipping-address\" v-if=\"shippingAddress\">\n                                    <h2>Shipping Address</h2>\n                                    <div class=\"row\">\n                                        <div class=\"col-md-6\">\n                                            <label>First Name</label>\n                                            <input class=\"form-control\" type=\"text\" placeholder=\"First Name\">\n                                        </div>\n                                        <div class=\"col-md-6\">\n                                            <label>Last Name</label>\n                                            <input class=\"form-control\" type=\"text\" placeholder=\"Last Name\">\n                                        </div>\n                                        <div class=\"col-md-6\">\n                                            <label>E-mail</label>\n                                            <input class=\"form-control\" type=\"text\" placeholder=\"E-mail\">\n                                        </div>\n                                        <div class=\"col-md-6\">\n                                            <label>Mobile No</label>\n                                            <input class=\"form-control\" type=\"text\" placeholder=\"Mobile No\">\n                                        </div>\n                                        <div class=\"col-md-12\">\n                                            <label>Address</label>\n                                            <input class=\"form-control\" type=\"text\" placeholder=\"Address\">\n                                        </div>\n                                        <div class=\"col-md-6\">\n                                            <label>Country</label>\n                                            <select class=\"custom-select\">\n                                                <option selected>Kenya</option>\n                                                <option>Tanzania</option>\n                                                <option>Uganda</option>\n                                                <option>Rwanda</option>\n                                            </select>\n                                        </div>\n                                        <div class=\"col-md-6\">\n                                            <label>City</label>\n                                            <input class=\"form-control\" type=\"text\" placeholder=\"City\">\n                                        </div>\n                                        <div class=\"col-md-6\">\n                                            <label>County</label>\n                                            <input class=\"form-control\" type=\"text\" placeholder=\"County\">\n                                        </div>\n                                        <div class=\"col-md-6\">\n                                            <label>ZIP Code</label>\n                                            <input class=\"form-control\" type=\"text\" placeholder=\"ZIP Code\">\n                                        </div>\n                                        <div class=\"col-md-12\">\n                                            <button class=\"btn\">Save Changes</button>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class=\"tab-pane fade\" id=\"account-tab\" role=\"tabpanel\" aria-labelledby=\"account-nav\">\n                                <h4>Account Details</h4>\n                                <form action=\"\" @submit.prevent=\"postProfileData\">\n                                    <div class=\"row\">\n                                        <div class=\"col-md-6\">\n                                            <input class=\"form-control\" type=\"text\" placeholder=\"First Name\" v-model=\"first_name\" :style=\"{borderColor: fnStyle,borderWidth: bWidth+'px'}\">\n                                            <span v-if=\"watcherMsg.first_name\" :style=\"{color: fnStyle, fontSize:10 + 'px'}\">{{watcherMsg.first_name}}</span>\n                                        </div>\n                                        <div class=\"col-md-6\">\n                                            <input class=\"form-control\" type=\"text\" placeholder=\"Last Name\" v-model=\"last_name\" :style=\"{borderColor: lnStyle,borderWidth: bWidth+'px'}\">\n                                            <span v-if=\"watcherMsg.last_name\" :style=\"{color: lnStyle, fontSize:10 + 'px'}\">{{watcherMsg.last_name}}</span>\n                                        </div>\n                                        <div class=\"col-md-6\">\n                                            <input class=\"form-control\" type=\"email\" placeholder=\"Email\" v-model=\"email\" disabled=\"true\">\n                                        </div>\n                                        <div class=\"col-md-6\">\n                                            <input class=\"form-control\" type=\"text\" placeholder=\"Mobile\" v-model=\"phone_number\" :style=\"{borderColor: nStyle,borderWidth: bWidth+'px'}\">\n                                            <span v-if=\"watcherMsg.phone_number\" :style=\"{color: nStyle, fontSize:10 + 'px'}\">{{watcherMsg.phone_number}}</span>\n                                        </div>\n                                        <div class=\"col-md-6\">\n                                            <select name=\"gender\" class=\"form-control\" v-model=\"gender\" :style=\"{borderColor: gStyle,borderWidth: bWidth+'px'}\">\n                                                <option value=\"\" disabled=\"true\">--Select your Gender--</option>\n                                                <option value=\"Male\">Male</option>\n                                                <option value=\"Female\">Female</option>\n                                                <option value=\"Other\">Other</option>\n                                            </select>\n                                        </div>\n                                        <div class=\"col-md-6\">\n                                            <input class=\"form-control\" type=\"date\" placeholder=\"Date of Birth\" v-model=\"birthdate\" :style=\"{borderColor: dStyle,borderWidth: bWidth+'px'}\">\n                                        </div>\n                                        <div class=\"col-md-6\">\n                                            <select name=\"city\" class=\"form-control\" v-model=\"city\" :style=\"{borderColor: cStyle,borderWidth: bWidth+'px'}\">\n                                                <option value=\"\" disabled=\"true\">--Select your City--</option>\n                                                <option value=\"Nairobi\">Nairobi</option>\n                                                <option value=\"Kisumu\">Kisumu</option>\n                                                <option value=\"Mombasa\">Mombasa</option>\n                                                <option value=\"Nakuru\">Nakuru</option>\n                                            </select>\n                                        </div>\n                                        <div class=\"col-md-6\">\n                                            <select name=\"county\" class=\"form-control\" v-model=\"county\" :style=\"{borderColor: ccStyle,borderWidth: bWidth+'px'}\">\n                                                <option value=\"\" disabled=\"true\">--Select your County--</option>\n                                                <option value=\"Siaya\">Siaya</option>\n                                                <option value=\"Kisumu\">Kisumu</option>\n                                                <option value=\"Nairobi\">Nairobi</option>\n                                                <option value=\"Mombasa\">Mombasa</option>\n                                            </select>\n                                        </div>\n                                        <div class=\"col-md-12\">\n                                            <input class=\"form-control\" type=\"text\" placeholder=\"Address\" v-model=\"address\" :style=\"{borderColor: aStyle,borderWidth: bWidth+'px'}\">\n                                            <span v-if=\"watcherMsg.address\" :style=\"{color: aStyle, fontSize:10 + 'px'}\">{{watcherMsg.address}}</span>\n                                        </div>\n                                        <div class=\"col-md-12 notification is-danger\" v-if=\"errors.length\">\n                                            <p style=\"color: red;\" v-for=\"error in errors\" v-bind:key=\"error\">{{ error }}</p>\n                                        </div>\n                                        <div class=\"col-md-12\">\n                                            <button class=\"btn\">Update Account</button>\n                                            <br><br>\n                                        </div>\n                                    </div>\n                                </form>\n                                <h4>Password change</h4>\n                            <form action=\"\" @submit.prevent=\"changePassword\">\n                                <div class=\"row\">\n                                    <div class=\"col-md-12\">\n                                        <input class=\"form-control\" type=\"password\" placeholder=\"Current Password\" v-model=\"currentPassword\">\n                                    </div>\n                                    <div class=\"col-md-6\">\n                                        <input class=\"form-control\" :type=\"passType ? 'text' : 'password'\" placeholder=\"New Password\" v-model=\"newPassword\">\n                                        <button type=\"button\" class=\"show-password\" @click=\"showPassword()\">\n                                        <i class=\"fa fa-eye-slash\" v-if=\"!passType\"></i>\n                                        <i class=\"fa fa-eye\" v-else></i>\n                                        </button>\n                                        <span v-if=\"watcherMsg.newPassword\" style=\"color:red; font-size: 10px;\">{{watcherMsg.newPassword}}</span>\n                                    </div>\n                                    <div class=\"col-md-6\">\n                                        <input class=\"form-control\" :type=\"pass2Type ? 'text' : 'password'\" placeholder=\"Confirm Password\" v-model=\"newPassword2\">\n                                        <button type=\"button\" class=\"show-password\" @click=\"showPassword2()\">\n                                        <i class=\"fa fa-eye-slash\" v-if=\"!pass2Type\"></i>\n                                        <i class=\"fa fa-eye\" v-else></i>\n                                        </button>\n                                        <span v-if=\"watcherMsg.newPassword2\" style=\"color:red; font-size: 10px;\">{{watcherMsg.newPassword2}}</span>\n                                    </div>\n                                    <div class=\"col-md-12\">\n                                        <button class=\"btn\">Save Changes</button>\n                                    </div>\n                                </div>\n                            </form>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <!-- My Account End -->\n    </div>\n</template>\n\n<script>\nimport Modal from \"@/components/Modal.vue\"\nimport Pagination from \"@/components/Pagination.vue\"\nimport DoughnutChart from \"@/components/DoughnutChart.vue\"\n\n\nexport default {\n    props: [\"getUserDetails\", \"userDetails\"],\n    components:{\n    Modal,\n    Pagination,\n    DoughnutChart,\n},\n    data() {\n        return {\n            id: \"\",\n            first_name: \"\",\n            last_name: \"\",\n            email: \"\",\n            phone_number: \"\",\n            birthdate: \"\",\n            address: \"\",\n            county: \"\",\n            city: \"\",\n            gender: \"\",\n            errors: [],\n            myOrders: [],\n            myOrderDetails:[],\n            isModalVisible: false,\n            isPayModalVisible: false,\n            paymentModalVisible: false,\n            lipaNaMpesa: false,\n            currentPage: 1,\n            totalItems: 0,\n            itemsPerPage: 2,\n            totalPages: 0,\n            start: 1,\n            limit: 2,\n            watcherMsg: [],\n            fnStyle : null,\n            lnStyle : null,\n            nStyle : null,\n            gStyle : null,\n            bWidth : null,\n            dStyle: null,\n            cStyle : null,\n            ccStyle : null,\n            aStyle : null,\n            pStyle: null,\n            p2Style: null,\n            rfStyle : null,\n            payment_number: '',\n            payment_number2: '',\n            mpesaRefs : [],\n            mpesaRef : '',\n            paymentConfirm : false,\n            myOrderID: '',\n            pageOfItems: [],\n            shippingAddress: false,\n            currentPassword: '',\n            newPassword: '',\n            newPassword2: '',\n            showPass: false,\n            passType: false,\n            showPass2: false,\n            pass2Type : false\n        };\n    },\n    watch:{\n        first_name(value){\n            this.first_name = value;\n            this.validateFirstName(value);\n        },\n        last_name(value){\n            this.last_name = value;\n            this.validateLastName(value);            \n        },\n        phone_number(value){\n            this.phone_number = value;\n            this.validatePhoneNumber(value)\n        },\n        gender(value){\n            this.gender = value;\n            this.validateGender(value)\n        },    \n        birthdate(value){\n            this.birthdate = value;\n            this.validateBirthdate(value)\n        },\n        city(value){\n            this.city = value;\n            this.validateCity(value)\n        },\n        county(value){\n            this.county = value;\n            this.validateCounty(value)\n        },  \n        address(value){\n            this.address = value;\n            this.validateAddress(value)\n        },  \n        payment_number(value){\n            this.payment_number = value;\n            this.validatePaymentNumber(value)\n        },\n         payment_number2(value){\n            this.payment_number2 = value;\n            this.confirmPaymentNumber(value)\n        },\n        mpesaRef(value){\n            this.mpesaRef = value;\n            this.validatePaymentRef(value)\n        },\n        newPassword2(value){\n            this.newPassword2 = value;\n            this.validatePassword2(value)\n        },\n         newPassword(value){\n            this.newPassword = value;\n            this.validateNewPassword(value)\n        },                     \n    },\n    computed:{\n        orderItemTotal(){\n            let itemTotal = [];\n            for(let i = 0; i<this.myOrderDetails.items.length; i++){\n                let lineTotal = (this.myOrderDetails.items[i].quantity * this.myOrderDetails.items[i].product.price).toFixed(2)\n                itemTotal.push(lineTotal);\n            }\n            return itemTotal\n        },\n    },\n    methods: {\n        validateFirstName(value){\n            if(value.length == 0){\n                this.watcherMsg['first_name'] = ''\n                this.fnStyle = ''\n                this.bWidth = 1\n            }\n            else{\n                if(value.length >0 && value.length < 3){\n                this.watcherMsg['first_name'] = 'Name is too short'\n                this.fnStyle = 'red'\n                this.bWidth = 2\n                }\n                else{\n                    if(/\\d/.test(value)){\n                        this.watcherMsg['first_name'] = 'Name should not contain a number'\n                        this.fnStyle = 'red'\n                        this.bWidth = 2\n                    }               \n                    else{\n                        this.watcherMsg['first_name'] = ''\n                        this.fnStyle = 'green'\n                        this.bWidth = 2\n                    }\n                }\n            }    \n        },\n        validateLastName(value){\n            if(value.length == 0){\n                this.watcherMsg['last_name'] = ''\n                this.lnStyle = ''\n                this.bWidth = 1\n            }\n            else{\n                if(value.length >0 && value.length < 3){\n                this.watcherMsg['last_name'] = 'Name is too short'\n                this.lnStyle = 'red'\n                this.bWidth = 2\n                }\n                else{\n                    if(/\\d/.test(value)){\n                        this.watcherMsg['last_name'] = 'Name should not contain a number'\n                        this.lnStyle = 'red'\n                        this.bWidth = 2\n                    }                  \n                    else{\n                        this.watcherMsg['last_name'] = ''\n                        this.lnStyle = 'green'\n                        this.bWidth = 2\n                    }\n                }\n            }    \n        },\n        validatePhoneNumber(value){\n            if(value == ''){\n                this.nStyle = '';\n                this.watcherMsg['phone_number'] = ''                        \n            }\n            else{\n                if ((/^(?:254|\\+254|0)?((?:(?:7(?:(?:[01249][0-9])|(?:5[789])|(?:6[89])))|(?:1(?:[1][0-5])))[0-9]{6})$/.test(value))|| (/^(?:254|\\+254|0)?((?:(?:7(?:(?:3[0-9])|(?:5[0-6])|(8[5-9])))|(?:1(?:[0][0-2])))[0-9]{6})$/.test(value))){\n                    this.nStyle = 'green';\n                    this.watcherMsg['phone_number'] = ''\n                    this.bWidth = 2\n                }\n                else{\n                    this.nStyle = 'red';\n                    this.watcherMsg['phone_number'] = 'Invalid Phone Number'\n                    this.bWidth = 2\n                }\n            }\n        },\n        validateGender(value){\n            if(value != ''){\n                this.gStyle = 'green';\n                this.bWidth = 2\n            }\n        }, \n        validateBirthdate(value){\n            if(value != ''){\n                this.bStyle = 'green';\n                this.bWidth = 2\n            }\n        },\n        validateCity(value){\n            if(value != ''){\n                this.cStyle = 'green';\n                this.bWidth = 2\n            }\n        },\n        validateCounty(value){\n            if(value != ''){\n                this.ccStyle = 'green';\n                this.bWidth = 2\n            }\n        },  \n        validateAddress(value){\n            if(value.length == 0){\n                this.aStyle = '';\n                this.watcherMsg['address'] = ''\n            }\n            else{\n                if(value.length > 0 && value.length < 3){\n                    this.watcherMsg['address'] = 'Address is too short'\n                    this.aStyle = 'red';\n                    this.bWidth = 2                    \n                }\n                else{\n                    if(value != '' && value.length > 3){\n                        this.aStyle = 'green';\n                        this.bWidth = 2;\n                        this.watcherMsg['address'] = ''\n                    }\n                }\n            }\n        },  \n        validatePaymentNumber(value){\n            if(value == ''){\n                    this.watcherMsg['payment_number'] = '';\n                    this.pStyle = '';\n                    this.bWidth = 1\n            }\n            else{\n                if(/^(?:254)?((?:(?:7(?:(?:[01249][0-9])|(?:5[789])|(?:6[89])))|(?:1(?:[1][0-5])))[0-9]{6})$/.test(value)){\n                    this.watcherMsg['payment_number'] = '';\n                    this.pStyle = 'green';\n                    this.bWidth = 2\n                }else{\n                    this.watcherMsg['payment_number'] = 'Invalid Phone Number';\n                    this.pStyle = 'red';\n                    this.bWidth = 2\n                    }\n            }\n        }, \n        confirmPaymentNumber(value){\n            if(value == ''){\n                this.watcherMsg['payment_number2'] = ''\n                this.p2Style = ''\n                this.bWidth = 1\n            }\n            else{\n                if(value == this.payment_number){\n                    this.watcherMsg['payment_number2'] = ''\n                    this.p2Style = 'green'\n                    this.bWidth = 2\n                }\n                else{\n                    this.watcherMsg['payment_number2'] = 'Invalid Phone Number'\n                    this.p2Style = 'red'\n                    this.bWidth = 2\n                }\n            }\n        },\n        validatePaymentRef(value){\n            if(value.length == 0){\n                this.watcherMsg['mpesaRef'] = '';\n                this.rfStyle = '';\n                this.bWidth = 1;\n            }\n            else{\n                if(value.length > 0 && value.length < 10){\n                    this.rfStyle = 'red';\n                    this.watcherMsg['mpesaRef'] = 'Incomplete Reference Number';\n                    this.bWidth = 2;\n                }\n                else{\n                    if(/^[A-Z0-9]$/.test(value)){\n                        this.rfStyle = 'green';\n                        this.watcherMsg['mpesaRef'] = '';\n                        this.bWidth = 2;\n                    }\n                }\n            }\n        }, \n        validateNewPassword(value){\n            if(value.length == ''){\n                this.watcherMsg['newPassword'] = '';\n            }else{\n                if(value.length > 0 && value.length < 8){\n                    this.watcherMsg['newPassword'] = 'Password is too short';\n                }\n                else{\n                    this.watcherMsg['newPassword'] = '';\n                }\n            }\n        },\n        validatePassword2(value){\n            if(value == this.newPassword){\n                this.watcherMsg['newPassword2'] = '';\n            }else{\n                this.watcherMsg['newPassword2'] = 'Passwords do not match';\n            }\n        },        \n        onChangePage(pageOfItems) {\n            // update page of items\n            this.pageOfItems = pageOfItems;\n        },\n        postProfileData() {\n            this.errors = [];\n            if (this.first_name === \"\" && this.last_name === \"\" && this.birthdate === \"\" && this.gender === \"\" && this.city === \"\" && this.county === \"\" && this.address === \"\") {\n                this.errors.push(\"Please fill in the details!\");\n            }\n            else {\n                if (this.first_name === \"\" || this.last_name === \"\" || this.birthdate === \"\" || this.gender === \"\" || this.city === \"\" || this.county === \"\" || this.address === \"\") {\n                    this.errors.push(\"Some details are missing!\");\n                }\n            }\n            if (!this.errors.length) {\n                let formData = {\n                    first_name: this.first_name,\n                    last_name: this.last_name,\n                    birthdate: this.birthdate,\n                    address: this.address,\n                    county: this.county,\n                    city: this.city,\n                    gender: this.gender,\n                    phone_number: this.phone_number,\n                    email: this.email\n                };\n                this.axios.put(\"/api/v1/user-list/\" + this.id + \"/\", formData)\n                    .then((response) => {\n                    this.$toast.success(\"Profile Succesfully Updated\", {\n                        duration: 5000,\n                        dismissible: true\n                    });\n                    this.fnStyle = ''\n                    this.lnStyle = ''\n                    this.gStyle = ''\n                    this.cStyle = ''\n                    this.ccStyle = ''\n                    this.aStyle = ''\n                    this.$router.push(\"/my-account\");\n                })\n                    .catch((error) => {\n                    console.log(error);\n                });\n            }\n        },\n        changePassword(){\n            let formData = {\n                password:this.newPassword\n            }\n            this.axios.patch(\"/api/v1/users/me/\",formData)\n            .then((response)=>{\n                console.log(response.data)\n                this.$toast.success('Password Changed Succesfully')\n                this.newPassword = ''\n                this.newPassword2 = ''\n                this.curreentPassword = ''\n                this.$store.commit('removeToken')\n                const token = this.$store.state.token\n                localStorage.setItem('token',token)\n                this.$router.push('/login')\n            })\n            .catch((error)=>{\n                console.log(error)\n            })\n        },\n        getProfileDetails() {\n            this.axios.get(\"/api/v1/users/me/\")\n                .then((response) => {\n                this.phone_number = response.data.phone_number;\n                this.email = response.data.email;\n                this.id = response.data.id;\n                this.first_name = response.data.first_name;\n                this.last_name = response.data.last_name;\n                this.gender = response.data.gender;\n                this.city = response.data.city;\n                this.county = response.data.county;\n                this.birthdate = response.data.birthdate;\n                this.address = response.data.address;\n                this.currentPassword = response.data.password;\n            })\n                .catch((error) => {\n                    console.log(error)\n            });\n        },\n        getMpesaPayments(){\n            this.mpesaRefs = []\n            this.axios.get('api/v1/mpesa-payments/')\n            .then((response)=>{\n                for(let i=0 ; i<response.data.length ; i++){\n                    let trans_id = response.data[i].transaction_id\n                    this.mpesaRefs.push(trans_id)\n                    \n                }\n                this.isPayModalVisible = true;\n            })\n            .catch((error)=>{\n                console.log(error)\n            })\n        },\n        confirmPayment(){\n            if(this.mpesaRefs.includes(this.mpesaRef)){\n\n                let formData = {\n                    paid : true,\n                    payment_reference : this.mpesaRef,\n                }\n               this.axios.patch(`/api/v1/my-orders/${this.myOrderID}/`,formData)\n               .then((response)=>{\n                    this.$toast.success('Payment Confirmation Succesful', {\n                        duration: 3000\n                    }) \n                    this.mpesaRef = ''\n                    this.payment_number2 = ''\n                    this.$router.push('/my-account')\n                    this.$store.commit('reloadingPage')\n               })\n               .catch((error)=>{\n                   console.log(error)\n               })\n\n            }\n            else{\n                this.$toast.error('Invalid Reference Number', {\n                    duration: 3000\n                })\n            }\n        },\n        showClientOrders() {\n            this.axios.get(\"api/v1/my-orders/\")\n                .then((response) => {\n                this.myOrders = response.data;\n            })\n                .catch((error) => {\n                console.log(error);\n            });\n        },\n        showModal() {\n            this.isModalVisible = true;\n\n            let orderID = arguments[0];\n            this.axios.get(`/api/v1/my-orders/${orderID}/`)\n            .then((response)=>{\n                this.myOrderDetails = response.data\n            })\n            .catch((error)=>{\n                console.log(error)\n            })\n        },\n        showPaymentModal(){\n            this.paymentModalVisible = true;\n            let orderID = arguments[0];\n            this.axios.get(`/api/v1/my-orders/${orderID}/`)\n            .then((response)=>{\n                this.myOrderID = orderID;\n            })\n            .catch((error)=>{\n                console.log(error)\n            })\n        },\n        closeModal() {\n            this.isModalVisible = false;\n            this.paymentModalVisible = false\n        },\n        showLipaNaMpesa(){\n            this.lipaNaMpesa = !this.lipaNaMpesa\n        },\n        showShippingAddress(){\n            this.shippingAddress = true;\n        },\n        payViaMpesa(){\n            this.paymentConfirm = true;\n            this.errors = []\n            if(this.payment_number === ''){\n                this.errors.push('Please enter phone number');\n                this.$toast.error('Invalid phone number', {\n                    duration: 3000\n                })\n            }\n            if(!this.errors.length && this.pStyle == 'green'){\n                let formData = {\n                    'PartyA': this.payment_number,\n                    'PhoneNumber': this.payment_number\n                }\n                this.axios.post('/api/v1/online/lipa2/',formData)\n                .then((response)=>{\n                    console.log('lipa na mpesa response is ',response.data)\n                    this.paymentConfirm = true;\n                })\n                .catch((error)=>{\n                    console.log(error)\n                })\n                .finally(()=>{\n                    \n                })\n            }\n        },\n        showPassword(){\n            if(!this.showPass){\n                this.showPass = true;\n                this.passType = true;\n            }\n            else{\n                this.showPass = false;\n                this.passType = false;\n            }\n        }, \n        showPassword2(){\n            if(!this.showPass2){\n                this.showPass2 = true;\n                this.pass2Type = true;\n            }\n            else{\n                this.showPass2 = false;\n                this.pass2Type = false;\n            }\n        },\n        printOrder(){\n            let orderID = arguments[0];\n            this.axios.get(`api/v1/view_pdf/${orderID}/`)\n            .then((response)=>{\n                console.log(response)\n            })\n            .catch((error)=>{\n                console.log(error)\n            })\n        }\n    },\n    beforeMount() {\n    },\n    mounted() {\n        this.getProfileDetails();\n        this.showClientOrders();\n        this.fnStyle = 'yellow',\n        this.lnStyle = null,\n        this.nStyle = null,\n        this.gStyle = null,\n        this.bWidth = null,\n        this.dStyle= null,\n        this.cStyle = null,\n        this.ccStyle = null,\n        this.aStyle = null,\n        this.pStyle= null,\n        this.p2Style= null,\n        \n \n        paypal.Buttons({\n            //Styling the paypal button\n            style: {\n                color: 'blue',\n                shape: 'pill',\n                label: 'pay',\n                height: 40\n            },\n            // Sets up the transaction when a payment button is clicked\n            createOrder: (data, actions) => {\n            return actions.order.create({\n                purchase_units: [{\n                amount: {\n                    // value: this.cartTotalUSD // Can also reference a variable or function\n                    value: 0.01\n                }\n                }]\n            });\n            },\n            // Finalize the transaction after payer approval\n            onApprove: (data, actions) => {   \n                const my_action = actions.order.capture().then(function(orderData) {\n                    // Successful capture! For dev/demo purposes:\n                    console.log('Capture result', orderData, JSON.stringify(orderData, null, 2));\n                    \n                    const transaction = orderData.purchase_units[0].payments.captures[0];\n                    alert(`Transaction ${transaction.status}: ${transaction.id}\\n\\nSee console for all available details`);\n                    \n                    \n                    // this.placeOrder();\n                    // When ready to go live, remove the alert and show a success message within this page. For example:\n                    // const element = document.getElementById('paypal-button-container');\n                    // element.innerHTML = '<h3>Thank you for your payment!</h3>';\n                    // Or go to another URL:  actions.redirect('thank_you.html');\n                });\n                return my_action;\n            }\n        }).render('#paypal-button-container');\n    },\n    \n}\n</script>\n\n<style scoped>\n    input{\n        font-weight: 300;\n        color: black;\n    }\n    select{\n        font-weight: 300;\n        color: black;\n    }\n    .empty-order-list{\n        text-align: center;\n        font-size: 20px;\n        font-weight: bold;\n        margin: 20px;\n    }\n    .emoji{\n        font-size: 36px;\n        font-style: normal;\n    }\n    .lipanampesa{\n        width: 95%;\n        height: 40px;\n        padding: 2px 10px;\n        font-family: 'Source Code Pro', monospace;\n        font-weight: 700;\n        font-size: 18px;\n        text-align: center;\n        color: #000000;\n        background: #228B22;\n        border: none;\n        transition: all .3s;\n        margin-bottom: 20px;\n        border-radius: 20px;\n    }\n    .lipanampesa:hover{\n        background-color: black;\n        color: green;\n    }\n    .procPayBtn{\n        margin: 20px;\n        color:#228B22;\n        background-color: black;\n        border: none;\n        border-radius: 4px;\n        transition: all .3s;\n        font-weight: 700;\n        font-size: 18px;\n    }\n    .procPayBtn:hover{\n        color: white;\n        background-color: green;\n    }\n    .payment-card{\n        background-color: white;\n        margin-left:20px;\n        margin-bottom: 30px;\n        margin-top: 20px;\n        align-items: center;\n        padding-bottom: 20px;\n    }\n    .bank-icon{\n        background-color: #f3f6ff;\n        width: 100px;\n        height: 100px;\n        margin-bottom: 20px;\n    }\n    .paypal-icon{\n        height: 100px;\n        width: 100%;\n        margin-bottom: 20px;\n    }\n    .mpesa-icon{\n        height: 50px;\n        margin-top: 50px;\n        margin-bottom: 20px;\n    }\n    .payment-row{\n        background-color: #f3f6ff;\n        margin-top: 20px;\n    }\n    .btn-payment-option{\n        margin-top: 30px;\n    }\n    .myorders-page .table .img {\n    display: flex;\n    align-items: center;\n    }\n\n    .myorders-page .table .img img {\n        max-width: 60px;\n        max-height: 60px;\n        margin-right: 15px;\n    }\n\n    .myorders-page .table .img p {\n        display: inline-block;\n        text-align: left;\n        margin: 0;\n    }\n    .show-password{\n        float: right;\n        margin-top: -50px;\n        position: relative;\n        z-index: 1;\n        cursor:pointer;\n        height: 35px;\n        border:0px;\n        background-color: inherit;\n        color:grey;\n    }\n    .show-password:focus{\n        outline: none;\n    }\n    .show-password:hover{\n        color: black !important;\n    }\n</style>"]},"metadata":{},"sourceType":"module"}