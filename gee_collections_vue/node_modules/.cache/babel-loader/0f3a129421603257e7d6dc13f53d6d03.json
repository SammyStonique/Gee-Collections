{"ast":null,"code":"import axios from 'axios';\nimport { nextTick } from 'vue';\nimport ProductCard from './components/ProductCard.vue';\nimport SearchProductCard from './components/SearchProductCard.vue';\nimport SearchAutoComplete from './components/SearchAutoComplete.vue';\nexport default {\n  components: {\n    ProductCard,\n    SearchAutoComplete,\n    SearchProductCard\n  },\n\n  data() {\n    return {\n      items: [],\n      cart: {\n        cartItems: []\n      },\n      wishlist: {\n        wishlistItems: []\n      },\n      quantity: 1,\n      shippingCost: 200,\n      token: '',\n      isAuthenticated: false,\n      productDetails: [],\n      searchItems: [],\n      searchItem: [],\n      productSearch: ''\n    };\n  },\n\n  beforeMount() {\n    this.$store.commit('initializeStore');\n    this.$store.commit('reloadingPage'); // this.$store.commit('removeFromCart');\n    // this.$store.commit('removeFromWishlist');\n\n    const token = this.$store.state.token;\n\n    if (token) {\n      axios.defaults.headers.common['Authorization'] = \"Token \" + token;\n    } else {\n      axios.defaults.headers.common['Authorization'] = \"\";\n    }\n\n    this.cart = this.$store.state.cart;\n    this.wishlist = this.$store.state.wishlist;\n    this.isAuthenticated = this.$store.state.isAuthenticated;\n  },\n\n  mounted() {\n    this.getUserDetails();\n  },\n\n  updated() {\n    this.productSearch = this.$store.state.productSearch;\n\n    if (this.$store.state.isProductSearched) {\n      this.getSearchedProduct();\n      this.$store.state.isProductSearched = false;\n      this.$router.push('/search');\n    }\n\n    this.$store.state.searchItems = this.searchItems;\n  },\n\n  computed: {\n    totalQuantity() {\n      let itemQuantity = 0;\n\n      for (let i = 0; i < this.cart.cartItems.length; i++) {\n        itemQuantity += this.cart.cartItems[i].quantity;\n      }\n\n      return itemQuantity;\n    },\n\n    totalWishlistQuantity() {\n      let itemQuantity = 0;\n\n      for (let i = 0; i < this.wishlist.wishlistItems.length; i++) {\n        itemQuantity += this.wishlist.wishlistItems[i].quantity;\n      }\n\n      return itemQuantity;\n    },\n\n    cartItemTotal() {\n      let itemTotal = [];\n\n      for (let i = 0; i < this.cart.cartItems.length; i++) {\n        let lineTotal = (this.cart.cartItems[i].quantity * this.cart.cartItems[i].items.price).toFixed(2);\n        itemTotal.push(lineTotal);\n      }\n\n      return itemTotal;\n    },\n\n    wishlistItemTotal() {\n      let itemTotal = [];\n\n      for (let i = 0; i < this.wishlist.wishlistItems.length; i++) {\n        let lineTotal = (this.wishlist.wishlistItems[i].quantity * this.wishlist.wishlistItems[i].items.price).toFixed(2);\n        itemTotal.push(lineTotal);\n      }\n\n      return itemTotal;\n    },\n\n    cartSubTotal() {\n      let itemTotal = [];\n      let cartTotal = 0;\n\n      for (let i = 0; i < this.cart.cartItems.length; i++) {\n        let lineTotal = (this.cart.cartItems[i].quantity * this.cart.cartItems[i].items.price).toFixed(2);\n        itemTotal.push(parseFloat(lineTotal));\n        cartTotal = itemTotal.reduce(function (a, b) {\n          return a + b;\n        });\n      }\n\n      return cartTotal;\n    },\n\n    wishlistSubTotal() {\n      let itemTotal = [];\n      let wishlistTotal = 0;\n\n      for (let i = 0; i < this.wishlist.wishlistItems.length; i++) {\n        let lineTotal = (this.wishlist.wishlistItems[i].quantity * this.wishlist.wishlistItems[i].items.price).toFixed(2);\n        itemTotal.push(parseFloat(lineTotal));\n        wishlistTotal = itemTotal.reduce(function (a, b) {\n          return a + b;\n        });\n      }\n\n      return wishlistTotal;\n    },\n\n    cartGrandTotal() {\n      return parseFloat(this.cartSubTotal) + this.shippingCost;\n    },\n\n    cartTotalUSD() {\n      return (parseFloat(this.cartGrandTotal) / 110).toFixed(2);\n    },\n\n    wishlistGrandTotal() {\n      return parseFloat(this.wishlistSubTotal) + this.shippingCost;\n    },\n\n    userDetails() {\n      return this.$store.state.loggedInUser;\n    }\n\n  },\n  methods: {\n    getProducts() {\n      this.axios.get('/api/v1/latest-products/').then(response => {\n        this.items = response.data;\n\n        for (let i = 0; i < this.items.length; i++) {\n          this.prodID = this.items[i].id;\n        }\n\n        return this.prodID;\n      }).catch(error => {\n        console.log(error);\n      });\n    },\n\n    addToCart() {\n      //Getting the index of the items in the cart\n      let selectedItem = arguments[0];\n\n      if (isNaN(this.quantity) || this.quantity < 1) {\n        this.quantity = 1;\n      }\n\n      const cartItem = {\n        items: this.items[selectedItem],\n        quantity: this.quantity\n      };\n      this.$store.commit('addToCart', cartItem);\n      this.$toast.success(`${this.items[selectedItem].name} added to cart`);\n    },\n\n    searchAddToCart() {\n      //Getting the index of the items in the cart\n      let selectedItem = arguments[0];\n      console.log('this.searchItems[selectedItem] is', this.searchItems[selectedItem]);\n\n      if (isNaN(this.quantity) || this.quantity < 1) {\n        this.quantity = 1;\n      }\n\n      const cartItem = {\n        items: this.searchItems[selectedItem],\n        quantity: this.quantity\n      };\n      this.$store.commit('addToCart', cartItem);\n      this.$toast.success(`${this.searchItems[selectedItem].name} added to cart`);\n    },\n\n    async getSearchedProduct() {\n      await this.axios.get(`api/v1/latest-products/${this.productSearch}/`).then(response => {\n        this.searchItem = response.data;\n        this.searchItems.push(this.searchItem);\n        this.$store.state.searchItems = this.searchItems;\n        this.$router.push('/search');\n      }).catch(error => {\n        console.log(error);\n      });\n    },\n\n    buyNow() {\n      let selectedItem = arguments[0];\n\n      if (isNaN(this.quantity) || this.quantity < 1) {\n        this.quantity = 1;\n      }\n\n      const cartItem = {\n        items: this.items[selectedItem],\n        quantity: this.quantity\n      };\n      this.$store.commit('addToCart', cartItem);\n      this.$router.push('/checkout');\n      this.scrollToTop();\n    },\n\n    addToWishlist() {\n      //Getting the index of the items in the wishlist\n      let selectedItem = arguments[0];\n\n      if (isNaN(this.quantity) || this.quantity < 1) {\n        this.quantity = 1;\n      }\n\n      const wishlistItem = {\n        items: this.items[selectedItem],\n        quantity: this.quantity\n      };\n      this.$store.commit('addToWishlist', wishlistItem);\n      this.$toast.success(`${this.items[selectedItem].name} added to wishlist`);\n    },\n\n    getUserDetails() {\n      this.$store.dispatch('getUserDetails').then(response => {}).catch(error => {\n        console.error(error);\n      });\n    },\n\n    getProductDetails(productID) {\n      this.axios.get(`/api/v1/latest-products/${productID}/`).then(response => {\n        this.productDetails = response.data;\n        console.log('product details are', this.productDetails);\n        this.$router.push(\"/product-detail\");\n        this.scrollToTop();\n      }).catch(error => {\n        console.log(error);\n      });\n    },\n\n    scrollToTop() {\n      window.scrollTo({\n        top: 0,\n        behavior: \"smooth\"\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["axios","nextTick","ProductCard","SearchProductCard","SearchAutoComplete","components","data","items","cart","cartItems","wishlist","wishlistItems","quantity","shippingCost","token","isAuthenticated","productDetails","searchItems","searchItem","productSearch","beforeMount","$store","commit","state","defaults","headers","common","mounted","getUserDetails","updated","isProductSearched","getSearchedProduct","$router","push","computed","totalQuantity","itemQuantity","i","length","totalWishlistQuantity","cartItemTotal","itemTotal","lineTotal","price","toFixed","wishlistItemTotal","cartSubTotal","cartTotal","parseFloat","reduce","a","b","wishlistSubTotal","wishlistTotal","cartGrandTotal","cartTotalUSD","wishlistGrandTotal","userDetails","loggedInUser","methods","getProducts","get","then","response","prodID","id","catch","error","console","log","addToCart","selectedItem","arguments","isNaN","cartItem","$toast","success","name","searchAddToCart","buyNow","scrollToTop","addToWishlist","wishlistItem","dispatch","getProductDetails","productID","window","scrollTo","top","behavior"],"sourceRoot":"","sources":["/home/sammyb/gee_collections/gee_collections_vue/src/App.vue"],"sourcesContent":["<template>\n        \n        <!-- Top bar Start -->\n        <div class=\"top-bar\">\n            <div class=\"container-fluid\">\n                <div class=\"row\">\n                    <div class=\"col-sm-6\">\n                        <i class=\"fa fa-envelope\"></i>\n                        otisamueloti@gmail.com\n                    </div>\n                    <div class=\"col-sm-6\">\n                        <i class=\"fa fa-phone-alt\"></i>\n                        +254-717-423-651\n                    </div>\n                </div>\n            </div>\n        </div>\n        <!-- Top bar End -->\n        \n        <!-- Nav Bar Start -->\n        <div class=\"nav\">\n            <div class=\"container-fluid\">\n                <nav class=\"navbar navbar-expand-md bg-dark navbar-dark\">\n                    <router-link to=\"#\" class=\"navbar-brand\">MENU</router-link>\n                    <button type=\"button\" class=\"navbar-toggler\" data-toggle=\"collapse\" data-target=\"#navbarCollapse\">\n                        <span class=\"navbar-toggler-icon\"></span>\n                    </button>\n\n                    <div class=\"collapse navbar-collapse justify-content-between\" id=\"navbarCollapse\">\n                        <div class=\"navbar-nav mr-auto\">\n                            <router-link to=\"/\" class=\"nav-item nav-link\">Home</router-link>\n                            <router-link to=\"/products\" class=\"nav-item nav-link\">Products</router-link>\n                            <router-link to=\"product-detail\" class=\"nav-item nav-link\" v-if=\"productDetails.length\">Product Detail</router-link>\n                            <router-link to=\"/cart\" class=\"nav-item nav-link\">Cart</router-link>\n                            <router-link to=\"/checkout\" class=\"nav-item nav-link\" v-if=\"this.cart.cartItems.length\">Checkout</router-link>\n                            <router-link to=\"/my-account\" class=\"nav-item nav-link\">My Account</router-link>\n                            <div class=\"nav-item dropdown\">\n                                <router-link to=\"#\" class=\"nav-link dropdown-toggle\" data-toggle=\"dropdown\">More Pages</router-link>\n                                <div class=\"dropdown-menu\">\n                                    <router-link to=\"/wishlist\" class=\"dropdown-item\">Wishlist</router-link>\n                                    <router-link to=\"/contact\" class=\"dropdown-item\">Contact Us</router-link>\n                                </div>\n                            </div>\n                        </div>\n                        <div class=\"navbar-nav ml-auto\" v-if=\"!isAuthenticated\">\n                            <div class=\"nav-item dropdown\">\n                                <router-link to=\"#\" class=\"nav-link dropdown-toggle\" data-toggle=\"dropdown\">User Account</router-link>\n                                <div class=\"dropdown-menu\">\n                                    <router-link to=\"/login\" class=\"dropdown-item\">Login</router-link>\n                                    <router-link to=\"/register\" class=\"dropdown-item\">Register</router-link>\n                                </div>\n                            </div>\n                        </div>\n                        <div class=\"navbar-nav ml-auto\" v-if=\"isAuthenticated\">\n                            <div class=\"nav-item dropdown\">\n                                <router-link to=\"#\" class=\"nav-link dropdown-toggle\" data-toggle=\"dropdown\">WELCOME,{{userDetails.email}}</router-link>\n                                <div class=\"dropdown-menu\">\n                                    <router-link to=\"/logout\" class=\"dropdown-item\">Logout</router-link>\n                                    \n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </nav>\n            </div>\n        </div>\n        <!-- Nav Bar End -->      \n        \n        <!-- Bottom Bar Start -->\n        <div class=\"bottom-bar\">\n            <div class=\"container-fluid\">\n                <div class=\"row align-items-center\">\n                    <div class=\"col-md-3\">\n                        <div class=\"logo\">\n                            <router-link to=\"/\">\n                                <img src=\"@/assets/img/new-logo.png\" alt=\"Logo\" class=\"new-logo\">\n                            </router-link>\n                        </div>\n                    </div>\n                    <div class=\"col-md-6\">\n                        <div class=\"search\">\n                            <!-- <input type=\"text\" placeholder=\"Search\"> -->\n                            <SearchAutoComplete\n                                :items=\"items\"\n                            />\n                            <button><i class=\"fa fa-search\"></i></button>\n                        </div>\n                    </div>\n                    <div class=\"col-md-3\">\n                        <div class=\"user\">\n                            <router-link to=\"/wishlist\" class=\"btn wishlist\">\n                                <i class=\"fa fa-heart\"></i>\n                                <span>({{totalWishlistQuantity}})</span>\n                            </router-link>\n                            <router-link to=\"/cart\" class=\"btn cart\">\n                                <i class=\"fa fa-shopping-cart\"></i>\n                                <span>({{totalQuantity}})</span>\n                            </router-link>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <!-- Bottom Bar End -->\n        <router-view\n        :getProducts=\"getProducts\"\n        :items=\"items\"\n        :productDetails=\"productDetails\"\n        :wishlist=\"wishlist.wishlistItems\"\n        :cart=\"cart.cartItems\"\n        :addToCart=\"addToCart\"\n        :buyNow=\"buyNow\"\n        :addToWishlist=\"addToWishlist\"\n        :totalQuantity=\"totalQuantity\"\n        :totalWishlistQuantity=\"totalWishlistQuantity\"\n        :cartSubTotal=\"cartSubTotal\"\n        :wishlistSubTotal=\"wishlistSubTotal\"\n        :cartItemTotal=\"cartItemTotal\"\n        :wishlistItemTotal=\"wishlistItemTotal\"\n        :cartGrandTotal=\"cartGrandTotal\"\n        :cartTotalUSD=\"cartTotalUSD\"\n        :wishlistGrandTotal=\"wishlistGrandTotal\"\n        :shippingCost=\"shippingCost\"\n        :token=\"token\"\n        :isAuthenticated=\"isAuthenticated\"\n        :getUserDetails=\"getUserDetails\"\n        :getProductDetails=\"getProductDetails\"\n        :userDetails=\"userDetails\"\n        :scrollToTop=\"scrollToTop\"\n        :searchItem=\"searchItem\"\n        :searchItems=\"searchItems\"\n        :productSearch=\"productSearch\"\n        :getSearchedProduct=\"getSearchedProduct\"\n        :searchAddToCart=\"searchAddToCart\"\n        />\n\n        <!-- Footer Start -->\n        <div class=\"footer\">\n            <div class=\"container-fluid\">\n                <div class=\"row\">\n                    <div class=\"col-lg-3 col-md-6\">\n                        <div class=\"footer-widget\">\n                            <h2>Get in Touch</h2>\n                            <div class=\"contact-info\">\n                                <p><i class=\"fa fa-map-marker\"></i>Opposite Jamia Mosque, Siaya</p>\n                                <p><a href=\"http://www.gmail.com\" target=\"blank\"><i class=\"fa fa-envelope\"></i>otisamueloti@gmail.com</a></p>\n                                <p><i class=\"fa fa-phone\"></i>+254-717-423-651</p>\n                            </div>\n                        </div>\n                    </div>\n                    \n                    <div class=\"col-lg-3 col-md-6\">\n                        <div class=\"footer-widget\">\n                            <h2>Follow Us</h2>\n                            <div class=\"contact-info\">\n                                <div class=\"social\">\n                                    <a href=\"http://www.twitter.com\" title=\"Twitter\" target=\"blank\" ><i class=\"fab fa-twitter\"></i></a>\n                                    <a href=\"http://www.facebook.com/grace.adhiambo.1\" title=\"Facebook\" target=\"blank\"><i class=\"fab fa-facebook-f\"></i></a>\n                                    <a href=\"http://www.linkedin.com\" title=\"LinkedIn\" target=\"blank\"><i class=\"fab fa-linkedin-in\"></i></a>\n                                    <a href=\"http://www.instagram.com\" title=\"Instagram\" target=\"blank\"><i class=\"fab fa-instagram\"></i></a>\n                                    <a href=\"http://www.youtube.com\" title=\"YouTube\" target=\"blank\"><i class=\"fab fa-youtube\"></i></a>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n\n                    <div class=\"col-lg-3 col-md-6\">\n                        <div class=\"footer-widget\">\n                            <h2>Company Info</h2>\n                            <ul>\n                                <li><router-link to=\"#\">About Us</router-link></li>\n                                <li><router-link to=\"#\">Privacy Policy</router-link></li>\n                                <li><router-link to=\"#\">Terms & Conditions</router-link></li>\n                            </ul>\n                        </div>\n                    </div>\n\n                    <div class=\"col-lg-3 col-md-6\">\n                        <div class=\"footer-widget\">\n                            <h2>Purchase Info</h2>\n                            <ul>\n                                <li><router-link to=\"#\">Payment Policy</router-link></li>\n                                <li><router-link to=\"#\">Shipping Policy</router-link></li>\n                                <li><router-link to=\"#\">Return Policy</router-link></li>\n                            </ul>\n                        </div>\n                    </div>\n                </div>\n                \n                <div class=\"row payment align-items-center\">\n                    <div class=\"col-md-6\">\n                        <div class=\"payment-method\">\n                            <h2>We Accept:</h2>\n                            <img src=\"@/assets/img/payment-method.png\" style=\"width: inherit;\" alt=\"Payment Method\"/>\n                        </div>\n                    </div>\n                    <div class=\"col-md-6\">\n                        <div class=\"payment-security\">\n                            <h2>Secured By:</h2>\n                            <img src=\"@/assets/img/godaddy.svg\" style=\"width: inherit;\" alt=\"Payment Security\" />\n                            <img src=\"@/assets/img/norton.svg\" style=\"width: inherit;\" alt=\"Payment Security\" />\n                            <img src=\"@/assets/img/ssl.svg\" style=\"width: inherit;\" alt=\"Payment Security\" />\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <!-- Footer End -->\n        \n        <!-- Footer Bottom Start -->\n        <div class=\"footer-bottom\">\n            <div class=\"container\">\n                <div class=\"row\">\n                    <div class=\"col-md-6 copyright\">\n                        <p>Copyright &copy; <router-link to=\"#\" style=\"color: white !important;\">SammyB</router-link>. All Rights Reserved</p>\n                    </div>\n\n                    <div class=\"col-md-6 template-by\">\n                        <p>Template By <router-link to=\"#\" style=\"color: white !important;\">SammyB</router-link></p>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <!-- Footer Bottom End -->       \n        \n        <!-- Back to Top -->\n        <router-link to=\"#\" @click=\"scrollToTop()\" class=\"back-to-top\"><i class=\"fa fa-chevron-up\"></i></router-link>\n\n</template>\n\n<script>\nimport axios from 'axios'\nimport { nextTick } from 'vue'\nimport ProductCard from './components/ProductCard.vue'\nimport SearchProductCard from './components/SearchProductCard.vue'\nimport SearchAutoComplete from './components/SearchAutoComplete.vue'\nexport default {\n    components:{\n        ProductCard,\n        SearchAutoComplete,\n        SearchProductCard\n    },\n    data(){\n        return{\n            items:[],\n            cart:{\n                cartItems:[]\n            },\n            wishlist:{\n                wishlistItems:[]\n            },\n            quantity: 1,\n            shippingCost: 200,\n            token: '',\n            isAuthenticated: false,\n            productDetails : [],\n            searchItems : [],\n            searchItem : [],\n            productSearch: ''\n        }\n    },\n    beforeMount() {\n        this.$store.commit('initializeStore');\n        this.$store.commit('reloadingPage');\n        // this.$store.commit('removeFromCart');\n        // this.$store.commit('removeFromWishlist');\n        \n        const token = this.$store.state.token\n        if (token) {\n        axios.defaults.headers.common['Authorization'] = \"Token \" + token\n        } else {\n        axios.defaults.headers.common['Authorization'] = \"\"\n        }\n        this.cart = this.$store.state.cart;\n        this.wishlist = this.$store.state.wishlist;\n        this.isAuthenticated = this.$store.state.isAuthenticated;\n    },\n    mounted(){\n        this.getUserDetails()\n    },\n    updated(){\n        \n        this.productSearch = this.$store.state.productSearch\n        if(this.$store.state.isProductSearched){\n            this.getSearchedProduct()\n            this.$store.state.isProductSearched = false;\n            this.$router.push('/search')\n        }\n        \n        this.$store.state.searchItems = this.searchItems;\n    },\n    computed: {\n        totalQuantity() {\n            let itemQuantity = 0\n\n            for(let i = 0; i<this.cart.cartItems.length; i++ ){\n                itemQuantity += this.cart.cartItems[i].quantity\n            }\n            return itemQuantity\n        },\n        totalWishlistQuantity() {\n            let itemQuantity = 0\n\n            for(let i = 0; i<this.wishlist.wishlistItems.length; i++ ){\n                itemQuantity += this.wishlist.wishlistItems[i].quantity\n            }\n            return itemQuantity\n        },\n        cartItemTotal(){\n            let itemTotal = [];\n            for(let i = 0; i<this.cart.cartItems.length; i++){\n                let lineTotal = (this.cart.cartItems[i].quantity * this.cart.cartItems[i].items.price).toFixed(2)\n                itemTotal.push(lineTotal);\n            }\n            return itemTotal\n        },\n        wishlistItemTotal(){\n            let itemTotal = [];\n            for(let i = 0; i<this.wishlist.wishlistItems.length; i++){\n                let lineTotal = (this.wishlist.wishlistItems[i].quantity * this.wishlist.wishlistItems[i].items.price).toFixed(2)\n                itemTotal.push(lineTotal);\n            }\n            return itemTotal\n        },\n        cartSubTotal(){\n            let itemTotal = [];\n            let cartTotal = 0\n            for(let i = 0; i<this.cart.cartItems.length; i++){\n                let lineTotal = (this.cart.cartItems[i].quantity * this.cart.cartItems[i].items.price).toFixed(2)\n                itemTotal.push(parseFloat(lineTotal));\n                cartTotal = itemTotal.reduce(function(a,b){\n                    return (a+ b);\n                })\n            }\n            return cartTotal\n        },\n        wishlistSubTotal(){\n            let itemTotal = [];\n            let wishlistTotal = 0\n            for(let i = 0; i<this.wishlist.wishlistItems.length; i++){\n                let lineTotal = (this.wishlist.wishlistItems[i].quantity * this.wishlist.wishlistItems[i].items.price).toFixed(2)\n                itemTotal.push(parseFloat(lineTotal));\n                wishlistTotal = itemTotal.reduce(function(a,b){\n                    return (a+ b);\n                })\n            }\n            return wishlistTotal\n        },\n        cartGrandTotal(){\n            return parseFloat(this.cartSubTotal) + this.shippingCost\n        },\n        cartTotalUSD(){\n            return (parseFloat(this.cartGrandTotal) / 110).toFixed(2)\n        },\n        wishlistGrandTotal(){\n            return parseFloat(this.wishlistSubTotal) + this.shippingCost\n        },\n        userDetails(){\n            return this.$store.state.loggedInUser;\n        }\n        \n    },\n    methods:{\n        getProducts(){                  \n            this.axios.get('/api/v1/latest-products/')\n            .then((response)=>{\n                this.items = response.data;\n                for(let i = 0; i<this.items.length; i++){\n                    this.prodID = this.items[i].id\n                }\n                return this.prodID\n            })\n            .catch((error)=>{\n                console.log(error)\n            })\n        },\n        addToCart(){\n            //Getting the index of the items in the cart\n            let selectedItem = arguments[0];\n            if(isNaN(this.quantity) || this.quantity<1){\n                this.quantity = 1;\n            }\n            \n            const cartItem={\n                items : this.items[selectedItem],\n                quantity : this.quantity\n            }\n            this.$store.commit('addToCart',cartItem);\n            this.$toast.success(`${this.items[selectedItem].name} added to cart`);\n            \n        },\n        searchAddToCart(){\n            //Getting the index of the items in the cart\n            let selectedItem = arguments[0];\n            console.log('this.searchItems[selectedItem] is',this.searchItems[selectedItem])\n            if(isNaN(this.quantity) || this.quantity<1){\n                this.quantity = 1;\n            }\n            \n            const cartItem={\n                items : this.searchItems[selectedItem],\n                quantity : this.quantity\n            }\n            this.$store.commit('addToCart',cartItem);\n            this.$toast.success(`${this.searchItems[selectedItem].name} added to cart`);\n        },\n        async getSearchedProduct(){\n            await this.axios.get(`api/v1/latest-products/${this.productSearch}/`)\n                .then((response)=>{\n                    this.searchItem = response.data;\n                    this.searchItems.push(this.searchItem)\n                    this.$store.state.searchItems = this.searchItems\n                    this.$router.push('/search')\n                })\n                .catch((error)=>{\n                    console.log(error)\n                })\n        },\n        buyNow(){\n            let selectedItem = arguments[0];\n            if(isNaN(this.quantity) || this.quantity<1){\n                this.quantity = 1;\n            }\n            \n            const cartItem={\n                items : this.items[selectedItem],\n                quantity : this.quantity\n            }\n            this.$store.commit('addToCart',cartItem);\n            this.$router.push('/checkout')\n            this.scrollToTop()\n        },\n        addToWishlist(){\n            //Getting the index of the items in the wishlist\n            let selectedItem = arguments[0];\n            if(isNaN(this.quantity) || this.quantity<1){\n                this.quantity = 1;\n            }\n            \n            const wishlistItem={\n                items : this.items[selectedItem],\n                quantity : this.quantity\n            }\n            this.$store.commit('addToWishlist',wishlistItem);\n            this.$toast.success(`${this.items[selectedItem].name} added to wishlist`);\n            \n        },\n        getUserDetails(){\n            this.$store.dispatch('getUserDetails')\n            .then((response)=>{\n\n            })\n            .catch((error)=>{\n                console.error(error)\n            })\n        },  \n        getProductDetails(productID){\n            this.axios.get(`/api/v1/latest-products/${productID}/`)\n            .then((response)=>{\n                this.productDetails = response.data;\n                console.log('product details are',this.productDetails)\n                this.$router.push(\"/product-detail\");\n                this.scrollToTop()\n            })\n            .catch((error)=>{\n                console.log(error)\n            })\n        },     \n        scrollToTop(){\n            window.scrollTo({top:0,behavior:\"smooth\"})\n        }\n    },\n}\n</script>\n\n\n<style lang=\"scss\">\n    .router-link-exact-active{\n        color: black !important;\n    }\n    .dropdown-toggle{\n        color: white !important;\n    }\n    .new-logo{\n        width: 212px;\n        height: 53px;\n    }\n</style>"]},"metadata":{},"sourceType":"module"}