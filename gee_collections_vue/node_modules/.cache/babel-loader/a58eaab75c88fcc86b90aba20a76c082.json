{"ast":null,"code":"import Modal from \"@/components/Modal.vue\";\nexport default {\n  props: [\"getUserDetails\", \"userDetails\"],\n  components: {\n    Modal\n  },\n\n  data() {\n    return {\n      id: \"\",\n      first_name: \"\",\n      last_name: \"\",\n      email: \"\",\n      phone_number: \"\",\n      birthdate: \"\",\n      address: \"\",\n      county: \"\",\n      city: \"\",\n      gender: \"\",\n      errors: [],\n      myOrders: [],\n      myOrderDetails: [],\n      isModalVisible: false,\n      paymentModalVisible: false,\n      lipaNaMpesa: false\n    };\n  },\n\n  computed: {\n    orderItemTotal() {\n      let itemTotal = [];\n\n      for (let i = 0; i < this.myOrderDetails.items.length; i++) {\n        let lineTotal = (this.myOrderDetails.items[i].quantity * this.myOrderDetails.items[i].product.price).toFixed(2);\n        itemTotal.push(lineTotal);\n      }\n\n      return itemTotal;\n    }\n\n  },\n  methods: {\n    showClientOrders() {\n      this.axios.get(\"api/v1/my-orders/\").then(response => {\n        this.myOrders = response.data;\n      }).catch(error => {\n        console.log(error);\n      });\n    },\n\n    postProfileData() {\n      this.errors = [];\n\n      if (this.first_name === \"\" && this.last_name === \"\" && this.birthdate === \"\" && this.gender === \"\" && this.city === \"\" && this.county === \"\" && this.address === \"\") {\n        this.errors.push(\"Please fill in the details!\");\n      } else {\n        if (this.first_name === \"\" || this.last_name === \"\" || this.birthdate === \"\" || this.gender === \"\" || this.city === \"\" || this.county === \"\" || this.address === \"\") {\n          this.errors.push(\"Some details are missing!\");\n        }\n      }\n\n      if (!this.errors.length) {\n        let formData = {\n          first_name: this.first_name,\n          last_name: this.last_name,\n          birthdate: this.birthdate,\n          address: this.address,\n          county: this.county,\n          city: this.city,\n          gender: this.gender,\n          phone_number: this.phone_number,\n          email: this.email\n        };\n        this.axios.put(\"/api/v1/user-list/\" + this.id + \"/\", formData).then(response => {\n          console.log(response.data);\n          this.$toast.success(\"Profile Succesfully Updated\", {\n            duration: 5000,\n            dismissible: true\n          });\n          this.$router.push(\"/my-account\");\n        }).catch(error => {\n          console.log(error);\n        });\n      }\n    },\n\n    getProfileDetails() {\n      this.axios.get(\"/api/v1/users/me/\").then(response => {\n        this.phone_number = response.data.phone_number;\n        this.email = response.data.email;\n        this.id = response.data.id;\n        this.first_name = response.data.first_name;\n        this.last_name = response.data.last_name;\n        this.gender = response.data.gender;\n        this.city = response.data.city;\n        this.county = response.data.county;\n        this.birthdate = response.data.birthdate;\n        this.address = response.data.address;\n      }).catch(error => {});\n    },\n\n    showModal() {\n      this.isModalVisible = true;\n      let orderID = arguments[0];\n      this.axios.get(`/api/v1/my-orders/${orderID}/`).then(response => {\n        this.myOrderDetails = response.data;\n      }).catch(error => {\n        console.log(error);\n      });\n    },\n\n    showPaymentModal() {\n      this.paymentModalVisible = true;\n    },\n\n    closeModal() {\n      this.isModalVisible = false;\n      this.paymentModalVisible = false;\n    },\n\n    showLipaNaMpesa() {\n      this.lipaNaMpesa = !this.lipaNaMpesa;\n    },\n\n    payViaMpesa() {\n      const formData = {\n        \"BusinessShortCode\": 174379,\n        \"Password\": \"MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjIwNDIxMTcxODIy\",\n        \"Timestamp\": \"20220421171822\",\n        \"TransactionType\": \"CustomerPayBillOnline\",\n        \"Amount\": 1,\n        \"PartyA\": 254795968217,\n        \"PartyB\": 174379,\n        \"PhoneNumber\": 254795968217,\n        \"CallBackURL\": \"https://478f-197-248-34-79.ngrok.io/api/v1/c2b/callback\",\n        \"AccountReference\": \"Gee Collections\",\n        \"TransactionDesc\": \"Payment of X\"\n      };\n      this.axios.post('https://sandbox.safaricom.co.ke/mpesa/stkpush/v1/processrequest', formData).then(response => {\n        console.log(response.data);\n      }).catch(error => {\n        console.log(error);\n      });\n    }\n\n  },\n\n  beforeMount() {},\n\n  mounted() {\n    this.getProfileDetails();\n    this.showClientOrders();\n  }\n\n};","map":{"version":3,"mappings":"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","names":["Modal","props","components","data","id","first_name","last_name","email","phone_number","birthdate","address","county","city","gender","errors","myOrders","myOrderDetails","isModalVisible","paymentModalVisible","lipaNaMpesa","computed","orderItemTotal","itemTotal","i","items","length","lineTotal","quantity","product","price","toFixed","push","methods","showClientOrders","axios","get","then","response","catch","error","console","log","postProfileData","formData","put","$toast","success","duration","dismissible","$router","getProfileDetails","showModal","orderID","arguments","showPaymentModal","closeModal","showLipaNaMpesa","payViaMpesa","post","beforeMount","mounted"],"sourceRoot":"","sources":["/home/sammyb/gee_collections/gee_collections_vue/src/views/AccountView.vue"],"sourcesContent":["<template>\n    <div class=\"my-account\">\n        <!-- Breadcrumb Start -->\n        <div class=\"breadcrumb-wrap\">\n            <div class=\"container-fluid\">\n                <ul class=\"breadcrumb\">\n                    <li class=\"breadcrumb-item\"><router-link to=\"/\">Home</router-link></li>\n                    <li class=\"breadcrumb-item active\">My Account</li>\n                </ul>\n            </div>\n        </div>\n        <!-- Breadcrumb End -->\n        \n        <!-- My Account Start -->\n        <div class=\"my-account\">\n            <div class=\"container-fluid\">\n                <div class=\"row\">\n                    <div class=\"col-md-3\">\n                        <div class=\"nav flex-column nav-pills\" role=\"tablist\" aria-orientation=\"vertical\">\n                            <a class=\"nav-link active\" id=\"dashboard-nav\" data-toggle=\"pill\" href=\"#dashboard-tab\" role=\"tab\"><i class=\"fa fa-tachometer-alt\"></i>Dashboard</a>\n                            <a class=\"nav-link\" id=\"orders-nav\" data-toggle=\"pill\" href=\"#orders-tab\" role=\"tab\"><i class=\"fa fa-shopping-bag\"></i>Orders</a>\n                            <a class=\"nav-link\" id=\"payment-nav\" data-toggle=\"pill\" href=\"#payment-tab\" role=\"tab\"><i class=\"fa fa-credit-card\"></i>Payment Method</a>\n                            <a class=\"nav-link\" id=\"address-nav\" data-toggle=\"pill\" href=\"#address-tab\" role=\"tab\"><i class=\"fa fa-map-marker-alt\"></i>Address</a>\n                            <a class=\"nav-link\" id=\"account-nav\" data-toggle=\"pill\" href=\"#account-tab\" role=\"tab\"><i class=\"fa fa-user\"></i>Account Details</a>\n                            <router-link to=\"/logout\" class=\"nav-link\"><i class=\"fa fa-sign-out-alt\"></i>Logout</router-link>\n                        </div>\n                    </div>\n                    <div class=\"col-md-9\">\n                        <div class=\"tab-content\">\n                            <div class=\"tab-pane fade show active\" id=\"dashboard-tab\" role=\"tabpanel\" aria-labelledby=\"dashboard-nav\">\n                                <h4>Dashboard</h4>\n                                <p>\n                                Hello {{this.first_name}}, we're very excited to have you on board. Gee Collections appreciates your contribution towards \n                                assisting us grow us a brand. We could not make it this far without you, always feel free to leave a suggestion so that we can \n                                provide you with quality services. Thank you.\n                                </p> \n                            </div>\n                            <div class=\"tab-pane fade\" id=\"orders-tab\" role=\"tabpanel\" aria-labelledby=\"orders-nav\">\n                                <div class=\"table-responsive\">\n                                    <table class=\"table table-bordered\">\n                                        <thead class=\"thead-dark\">\n                                            <tr>\n                                                <th>#</th>\n                                                <th>Date</th>\n                                                <th>Order Total</th>\n                                                <th>Status</th>\n                                                <th>Action</th>\n                                            </tr>\n                                        </thead>\n                                        <tbody>\n                                            <tr v-for=\"order,index in myOrders\" :key=\"index\">\n                                                <td>{{order.id}}</td>\n                                                <td>{{order.created_at.substring(0,10)}}</td>\n                                                <td>ksh {{Number(order.order_total).toLocaleString()}}</td>\n                                                <td v-if=\"order.paid\">Paid</td>\n                                                <td v-else>Not Paid</td>\n                                                <td v-if=\"order.paid\"><button class=\"btn\" @click=\"showModal(order.id)\">View Order</button></td>\n                                                <td v-else><button class=\"btn\" @click=\"showPaymentModal(order.id)\">Make Payment</button></td>\n                                            </tr>\n                                        </tbody>\n                                    </table>\n                                    <p class=\"empty-order-list\" v-if=\"!Object.keys(myOrders).length\"><span class=\"emoji \" role=\"img\" aria-label=\"\">😭</span><br/><em class=\"empty-cart-message\">Ooops,You haven't placed any order yet</em></p>\n                                </div>\n                            </div>\n                            <!-- MODAL component for viewing order details -->\n                            <Modal\n                            v-show=\"isModalVisible\"\n                            @close=\"closeModal\"\n                            > \n                            <template v-slot:header>\n                                My Order Details\n                            </template>\n\n                            <template v-slot:body>\n                                <div class=\"table-responsive\">\n                                    <table class=\"table table-bordered\">\n                                        <thead class=\"thead-dark\">\n                                            <tr>\n                                                <th>Product</th>\n                                                <th>Price</th>\n                                                <th>Quantity</th>\n                                                <th>Total</th>\n                                            </tr>\n                                        </thead>\n                                        <tbody class=\"align-middle\">\n                                            <tr v-for=\"ordDet,index in myOrderDetails.items\" :key=\"index\">\n                                                <td>\n                                                    <div class=\"img\">\n                                                        <!-- <a href=\"#\"><img :src=\"`${ordDet.product.image}`\" alt=\"Image\"></a> -->\n                                                        <p>{{ordDet.product.name}}</p>\n                                                    </div>\n                                                </td>\n                                                <td>ksh. {{Number(ordDet.product.price).toLocaleString()}}</td>\n                                                <td>{{ordDet.quantity}}</td>\n                                                <td>ksh. {{Number(orderItemTotal[index]).toLocaleString()}}</td>\n                                            </tr>\n                                        </tbody>\n                                    </table>\n                                </div>\n                            </template>\n\n                            <template v-slot:footer>\n                                This is a new modal footer.\n                            </template>\n                            </Modal>\n\n                            <!-- MODAL component for making payment -->\n                            <Modal\n                            v-show=\"paymentModalVisible\"\n                            @close=\"closeModal\"\n                            > \n                            <template v-slot:header>\n                                Payment Methods\n                            </template>\n\n                            <template v-slot:body>\n                                <div>\n                                    <button type=\"button\" class=\"lipanampesa\" @click=\"showLipaNaMpesa\">Lipa Na Mpesa</button>\n                                    <div v-if=\"lipaNaMpesa\">\n                                    <p>To proceed to Lipa Na Mpesa, please enter the phone number you would like to make the payment with.</p>\n                                    <label for=\"\">Phone Number:</label>\n                                    <input type=\"text\" class=\"form-control\" placeholder=\"e.g 2547XXXXXXXX\">\n                                    <!-- <input type=\"text\" class=\"form-control\" placeholder=\"e.g 2547XXXXXXXX\" v-model=\"payment_number\"> -->\n                                    <div class=\"col-md-12 notification is-danger\" v-if=\"errors.length\">\n                                        <p style=\"color: red;\" v-for=\"error in errors\" v-bind:key=\"error\">{{ error }}</p>\n                                    </div>\n                                    <button type=\"button\" class=\"procPayBtn\" @click=\"payViaMpesa\">Proceed to Pay</button>\n                                    </div>\n                                </div>\n                            </template>\n\n                            <template v-slot:footer>\n                                This is a new modal footer.\n                            </template>\n                            </Modal>\n                            <div class=\"tab-pane fade\" id=\"payment-tab\" role=\"tabpanel\" aria-labelledby=\"payment-nav\">\n                                <h4>Payment Method</h4>\n                                <div class=\"row payment-row\">\n                                    <div class=\"col-md-12\">\n                                        <h6 style=\"font-weight:700;\">Select from our popular payment options below</h6>\n                                    </div> \n                                    <div class=\"col-md-3 payment-card\">\n                                        <h6 style=\"font-weight:700;\">Bank Payment</h6>\n                                        <img src=\"@/assets/img/bank-icon.jpeg\" alt=\"Bank Icon\" class=\"bank-icon\">\n                                    </div>\n                                    <div class=\"col-md-3 payment-card\">\n                                        <h6 style=\"font-weight:700;\">Lipa Na M-pesa</h6>\n                                        <img src=\"@/assets/img/mpesa.jpeg\" alt=\"M-Pesa\">\n                                    </div>\n                                    <div class=\"col-md-3 payment-card\">\n                                        <h6 style=\"font-weight:700;\">PayPal</h6>\n                                        <img src=\"@/assets/img/paypal-icon.png\" alt=\"PayPal\" class=\"paypal-icon\">\n                                    </div>\n                                </div>\n                            </div>\n                            <div class=\"tab-pane fade\" id=\"address-tab\" role=\"tabpanel\" aria-labelledby=\"address-nav\">\n                                <h4>Address</h4>\n                                <div class=\"row\">\n                                    <div class=\"col-md-6\">\n                                        <h5>Payment Address</h5>\n                                        <p>123 Payment Street, Los Angeles, CA</p>\n                                        <p>Mobile: 012-345-6789</p>\n                                        <button class=\"btn\">Edit Address</button>\n                                    </div>\n                                    <div class=\"col-md-6\">\n                                        <h5>Shipping Address</h5>\n                                        <p>123 Shipping Street, Los Angeles, CA</p>\n                                        <p>Mobile: 012-345-6789</p>\n                                        <button class=\"btn\">Edit Address</button>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class=\"tab-pane fade\" id=\"account-tab\" role=\"tabpanel\" aria-labelledby=\"account-nav\">\n                                <h4>Account Details</h4>\n                                <form action=\"\" @submit.prevent=\"postProfileData\">\n                                    <div class=\"row\">\n                                        <div class=\"col-md-6\">\n                                            <input class=\"form-control\" type=\"text\" placeholder=\"First Name\" v-model=\"first_name\">\n                                        </div>\n                                        <div class=\"col-md-6\">\n                                            <input class=\"form-control\" type=\"text\" placeholder=\"Last Name\" v-model=\"last_name\">\n                                        </div>\n                                        <div class=\"col-md-6\">\n                                            <input class=\"form-control\" type=\"email\" placeholder=\"Email\" v-model=\"email\" disabled=\"true\">\n                                        </div>\n                                        <div class=\"col-md-6\">\n                                            <input class=\"form-control\" type=\"text\" placeholder=\"Mobile\" v-model=\"phone_number\">\n                                        </div>\n                                        <div class=\"col-md-6\">\n                                            <select name=\"gender\" class=\"form-control\" v-model=\"gender\">\n                                                <option value=\"\" disabled=\"true\">--Select your Gender--</option>\n                                                <option>Male</option>\n                                                <option>Female</option>\n                                                <option>Other</option>\n                                            </select>\n                                        </div>\n                                        <div class=\"col-md-6\">\n                                            <input class=\"form-control\" type=\"date\" placeholder=\"Date of Birth\" v-model=\"birthdate\">\n                                        </div>\n                                        <div class=\"col-md-6\">\n                                            <select name=\"city\" class=\"form-control\" v-model=\"city\">\n                                                <option value=\"\" disabled=\"true\">--Select your City--</option>\n                                                <option>Nairobi</option>\n                                                <option>Kisumu</option>\n                                                <option>Mombasa</option>\n                                                <option>Nakuru</option>\n                                            </select>\n                                        </div>\n                                        <div class=\"col-md-6\">\n                                            <select name=\"county\" class=\"form-control\" v-model=\"county\">\n                                                <option disabled=\"true\">--Select your County--</option>\n                                                <option>Siaya</option>\n                                                <option>Kisumu</option>\n                                                <option>Nairobi</option>\n                                                <option>Mombasa</option>\n                                            </select>\n                                        </div>\n                                        <div class=\"col-md-12\">\n                                            <input class=\"form-control\" type=\"text\" placeholder=\"Address\" v-model=\"address\">\n                                        </div>\n                                        <div class=\"col-md-12 notification is-danger\" v-if=\"errors.length\">\n                                            <p style=\"color: red;\" v-for=\"error in errors\" v-bind:key=\"error\">{{ error }}</p>\n                                        </div>\n                                        <div class=\"col-md-12\">\n                                            <button class=\"btn\">Update Account</button>\n                                            <br><br>\n                                        </div>\n                                    </div>\n                                </form>\n                                <h4>Password change</h4>\n                                <div class=\"row\">\n                                    <div class=\"col-md-12\">\n                                        <input class=\"form-control\" type=\"password\" placeholder=\"Current Password\">\n                                    </div>\n                                    <div class=\"col-md-6\">\n                                        <input class=\"form-control\" type=\"text\" placeholder=\"New Password\">\n                                    </div>\n                                    <div class=\"col-md-6\">\n                                        <input class=\"form-control\" type=\"text\" placeholder=\"Confirm Password\">\n                                    </div>\n                                    <div class=\"col-md-12\">\n                                        <button class=\"btn\">Save Changes</button>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <!-- My Account End -->\n    </div>\n</template>\n\n<script>\nimport Modal from \"@/components/Modal.vue\"\n\nexport default {\n    props: [\"getUserDetails\", \"userDetails\"],\n    components:{\n        Modal,\n    },\n    data() {\n        return {\n            id: \"\",\n            first_name: \"\",\n            last_name: \"\",\n            email: \"\",\n            phone_number: \"\",\n            birthdate: \"\",\n            address: \"\",\n            county: \"\",\n            city: \"\",\n            gender: \"\",\n            errors: [],\n            myOrders: [],\n            myOrderDetails:[],\n            isModalVisible: false,\n            paymentModalVisible: false,\n            lipaNaMpesa: false,\n        };\n    },\n    computed:{\n        orderItemTotal(){\n            let itemTotal = [];\n            for(let i = 0; i<this.myOrderDetails.items.length; i++){\n                let lineTotal = (this.myOrderDetails.items[i].quantity * this.myOrderDetails.items[i].product.price).toFixed(2)\n                itemTotal.push(lineTotal);\n            }\n            return itemTotal\n        },\n    },\n    methods: {\n        showClientOrders() {\n            this.axios.get(\"api/v1/my-orders/\")\n                .then((response) => {\n                this.myOrders = response.data;\n            })\n                .catch((error) => {\n                console.log(error);\n            });\n        },\n        postProfileData() {\n            this.errors = [];\n            if (this.first_name === \"\" && this.last_name === \"\" && this.birthdate === \"\" && this.gender === \"\" && this.city === \"\" && this.county === \"\" && this.address === \"\") {\n                this.errors.push(\"Please fill in the details!\");\n            }\n            else {\n                if (this.first_name === \"\" || this.last_name === \"\" || this.birthdate === \"\" || this.gender === \"\" || this.city === \"\" || this.county === \"\" || this.address === \"\") {\n                    this.errors.push(\"Some details are missing!\");\n                }\n            }\n            if (!this.errors.length) {\n                let formData = {\n                    first_name: this.first_name,\n                    last_name: this.last_name,\n                    birthdate: this.birthdate,\n                    address: this.address,\n                    county: this.county,\n                    city: this.city,\n                    gender: this.gender,\n                    phone_number: this.phone_number,\n                    email: this.email\n                };\n                this.axios.put(\"/api/v1/user-list/\" + this.id + \"/\", formData)\n                    .then((response) => {\n                    console.log(response.data)\n                    this.$toast.success(\"Profile Succesfully Updated\", {\n                        duration: 5000,\n                        dismissible: true\n                    });\n                    this.$router.push(\"/my-account\");\n                })\n                    .catch((error) => {\n                    console.log(error);\n                });\n            }\n        },\n        getProfileDetails() {\n            this.axios.get(\"/api/v1/users/me/\")\n                .then((response) => {\n                this.phone_number = response.data.phone_number;\n                this.email = response.data.email;\n                this.id = response.data.id;\n                this.first_name = response.data.first_name;\n                this.last_name = response.data.last_name;\n                this.gender = response.data.gender;\n                this.city = response.data.city;\n                this.county = response.data.county;\n                this.birthdate = response.data.birthdate;\n                this.address = response.data.address;\n            })\n                .catch((error) => {\n            });\n        },\n        showModal() {\n            this.isModalVisible = true;\n\n            let orderID = arguments[0];\n            this.axios.get(`/api/v1/my-orders/${orderID}/`)\n            .then((response)=>{\n                this.myOrderDetails = response.data\n            })\n            .catch((error)=>{\n                console.log(error)\n            })\n        },\n        showPaymentModal(){\n            this.paymentModalVisible = true\n        },\n        closeModal() {\n            this.isModalVisible = false;\n            this.paymentModalVisible = false\n        },\n        showLipaNaMpesa(){\n            this.lipaNaMpesa = !this.lipaNaMpesa\n        },\n        payViaMpesa(){\n            const formData = {\n                    \"BusinessShortCode\": 174379,\n                    \"Password\": \"MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjIwNDIxMTcxODIy\",\n                    \"Timestamp\": \"20220421171822\",\n                    \"TransactionType\": \"CustomerPayBillOnline\",\n                    \"Amount\": 1,\n                    \"PartyA\": 254795968217,\n                    \"PartyB\": 174379,\n                    \"PhoneNumber\": 254795968217,\n                    \"CallBackURL\": \"https://478f-197-248-34-79.ngrok.io/api/v1/c2b/callback\",\n                    \"AccountReference\": \"Gee Collections\",\n                    \"TransactionDesc\": \"Payment of X\"\n                }\n                this.axios.post('https://sandbox.safaricom.co.ke/mpesa/stkpush/v1/processrequest',formData)\n                .then((response)=>{\n                    console.log(response.data)\n                })\n                .catch((error)=>{\n                    console.log(error)\n                })\n        }\n    },\n    beforeMount() {\n    },\n    mounted() {\n        this.getProfileDetails();\n        this.showClientOrders();\n    },\n}\n</script>\n\n<style scoped>\n    input{\n        font-weight: 300;\n        color: black;\n    }\n    select{\n        font-weight: 300;\n        color: black;\n    }\n    .empty-order-list{\n        text-align: center;\n        font-size: 20px;\n        font-weight: bold;\n        margin: 20px;\n    }\n    .emoji{\n        font-size: 36px;\n        font-style: normal;\n    }\n    .lipanampesa{\n        width: 60%;\n        height: 40px;\n        padding: 2px 10px;\n        font-family: 'Source Code Pro', monospace;\n        font-weight: 700;\n        font-size: 18px;\n        text-align: center;\n        color: #000000;\n        background: #228B22;\n        border: none;\n        border-radius: 4px;\n        transition: all .3s;\n        margin-bottom: 20px;\n    }\n    .lipanampesa:hover{\n        background-color: black;\n        color: green;\n    }\n    .procPayBtn{\n        margin: 20px;\n        color:#228B22;\n        background-color: black;\n        border: none;\n        border-radius: 4px;\n        transition: all .3s;\n        font-weight: 700;\n        font-size: 18px;\n    }\n    .procPayBtn:hover{\n        color: white;\n        background-color: green;\n    }\n    .payment-card{\n        background-color: white;\n        margin-left:20px;\n        margin-bottom: 30px;\n        margin-top: 20px;\n        align-items: center;\n    }\n    .bank-icon{\n        background-color: #f3f6ff;\n        width: 100px;\n        height: 100px;\n    }\n    .paypal-icon{\n        height: 100px;\n    }\n    .payment-row{\n        background-color: #f3f6ff;\n        margin-top: 20px;\n    }\n</style>"]},"metadata":{},"sourceType":"module"}