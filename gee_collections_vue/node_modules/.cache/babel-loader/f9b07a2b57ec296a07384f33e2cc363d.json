{"ast":null,"code":"export default {\n  props: ['cartGrandTotal', 'cartItemTotal', 'cartSubTotal', 'shippingCost', 'cartTotalUSD'],\n  el: '#selector',\n\n  data() {\n    return {\n      cart: {\n        cartItems: []\n      },\n      id: '',\n      first_name: '',\n      last_name: '',\n      email: '',\n      phone_number: '',\n      address: '',\n      county: '',\n      city: '',\n      gender: '',\n      errors: [],\n      lipaNaMpesa: false,\n      checked: false,\n      errors: [],\n      payment_number: ''\n    };\n  },\n\n  methods: {\n    getProfileDetails() {\n      this.axios.get('/api/v1/users/me/').then(response => {\n        this.phone_number = response.data.phone_number;\n        this.email = response.data.email;\n        this.id = response.data.id;\n        this.first_name = response.data.first_name;\n        this.last_name = response.data.last_name;\n        this.gender = response.data.gender;\n        this.city = response.data.city;\n        this.county = response.data.county;\n        this.address = response.data.address;\n      }).catch(error => {});\n    },\n\n    payViaMpesa() {\n      this.errors = [];\n\n      if (this.payment_number === '') {\n        this.errors.push('Please enter phone number');\n        this.$toast.error('Invalid phone number', {\n          duration: 3000\n        });\n      }\n\n      if (!this.errors.length) {\n        let headers = new Headers();\n        headers.append(\"Content-Type\", \"application/json\");\n        headers.append(\"Authorization\", \"Bearer rzNoq74BaMUOaGGOwPpeUt3BKMlT\");\n        const formData = {\n          \"BusinessShortCode\": 174379,\n          \"Password\": \"MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjIwNDIxMTcxODIy\",\n          \"Timestamp\": \"20220421171822\",\n          \"TransactionType\": \"CustomerPayBillOnline\",\n          \"Amount\": 1,\n          \"PartyA\": this.payment_number,\n          \"PartyB\": 174379,\n          \"PhoneNumber\": this.payment_number,\n          \"CallBackURL\": \"https://478f-197-248-34-79.ngrok.io/api/v1/c2b/callback\",\n          \"AccountReference\": \"Gee Collections\",\n          \"TransactionDesc\": \"Payment of X\"\n        };\n        this.axios.post('https://sandbox.safaricom.co.ke/mpesa/stkpush/v1/processrequest', headers, formData).then(response => {\n          console.log(response.data);\n        }).catch(error => {\n          console.log(error);\n        });\n      }\n    },\n\n    placeOrder() {\n      const items = [];\n\n      for (let i = 0; i < this.cart.cartItems.length; i++) {\n        const item = this.cart.cartItems[i];\n        const obj = {\n          product: item.items.id,\n          quantity: item.quantity,\n          price: item.items.price * item.quantity\n        };\n        items.push(obj);\n      }\n\n      let formData = {\n        first_name: this.first_name,\n        last_name: this.last_name,\n        address: this.address,\n        county: this.county,\n        city: this.city,\n        phone_number: this.phone_number,\n        email: this.email,\n        items: items,\n        order_total: this.cartSubTotal\n      };\n      console.log(formData);\n      this.axios.post('/api/v1/checkout/', formData).then(response => {\n        console.log(response.data);\n        this.$store.commit('clearCart');\n        this.$toast.success('Order succesfully placed');\n        this.$router.push('/');\n        this.$store.commit('reloadingPage');\n        this.$router.push('/');\n      }).catch(error => {\n        console.log(error);\n      });\n    },\n\n    showLipaNaMpesa() {\n      this.lipaNaMpesa = !this.lipaNaMpesa;\n    },\n\n    showShippingDetails() {\n      this.checked = !this.checked;\n      console.log(this.checked);\n    },\n\n    mountPaypalButton() {}\n\n  },\n\n  beforeMount() {\n    this.getProfileDetails();\n    this.cart = this.$store.state.cart;\n  },\n\n  mounted() {\n    paypal.Buttons({\n      //Styling the paypal button\n      style: {\n        color: 'blue',\n        shape: 'pill',\n        label: 'pay',\n        height: 40\n      },\n      // Sets up the transaction when a payment button is clicked\n      createOrder: (data, actions) => {\n        return actions.order.create({\n          purchase_units: [{\n            amount: {\n              value: this.cartTotalUSD // Can also reference a variable or function\n\n            }\n          }]\n        });\n      },\n      // Finalize the transaction after payer approval\n      onApprove: (data, actions) => {\n        return actions.order.capture().then(function (orderData) {\n          // Successful capture! For dev/demo purposes:\n          console.log('Capture result', orderData, JSON.stringify(orderData, null, 2));\n          const transaction = orderData.purchase_units[0].payments.captures[0];\n          alert(`Transaction ${transaction.status}: ${transaction.id}\\n\\nSee console for all available details`); // When ready to go live, remove the alert and show a success message within this page. For example:\n          // const element = document.getElementById('paypal-button-container');\n          // element.innerHTML = '<h3>Thank you for your payment!</h3>';\n          // Or go to another URL:  actions.redirect('thank_you.html');\n        });\n      }\n    }).render('#paypal-button-container');\n  }\n\n};","map":{"version":3,"mappings":"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","names":["props","el","data","cart","cartItems","id","first_name","last_name","email","phone_number","address","county","city","gender","errors","lipaNaMpesa","checked","payment_number","methods","getProfileDetails","axios","get","then","response","catch","error","payViaMpesa","push","$toast","duration","length","headers","Headers","append","formData","post","console","log","placeOrder","items","i","item","obj","product","quantity","price","order_total","cartSubTotal","$store","commit","success","$router","showLipaNaMpesa","showShippingDetails","mountPaypalButton","beforeMount","state","mounted","paypal","Buttons","style","color","shape","label","height","createOrder","actions","order","create","purchase_units","amount","value","cartTotalUSD","onApprove","capture","orderData","JSON","stringify","transaction","payments","captures","alert","status","render"],"sourceRoot":"","sources":["/home/sammyb/gee_collections/gee_collections_vue/src/views/CheckoutView.vue"],"sourcesContent":["<template>\n    <div class=\"checkout\">\n        <!-- Breadcrumb Start -->\n        <div class=\"breadcrumb-wrap\">\n            <div class=\"container-fluid\">\n                <ul class=\"breadcrumb\">\n                    <li class=\"breadcrumb-item\"><router-link to=\"/\">Home</router-link></li>\n                    <li class=\"breadcrumb-item\"><router-link to=\"/cart\">Cart</router-link></li>\n                    <li class=\"breadcrumb-item active\">Checkout</li>\n                </ul>\n            </div>\n        </div>\n        <!-- Breadcrumb End -->\n        \n        <!-- Checkout Start -->\n        <div class=\"checkout\">\n            <div class=\"container-fluid\"> \n                <form action=\"\" @submit.prevent=\"placeOrder\">\n                    <div class=\"row\">\n                            <div class=\"col-lg-8\">\n                                <div class=\"checkout-inner\">\n                                    <div class=\"billing-address\">\n                                        <h2>Billing Address</h2>\n                                        <div class=\"row\">\n                                            <div class=\"col-md-6\">\n                                                <label>First Name</label>\n                                                    <input class=\"form-control\" type=\"text\" placeholder=\"First Name\" v-model=\"first_name\">\n                                            </div>\n                                            <div class=\"col-md-6\">\n                                                <label>Last Name</label>\n                                                    <input class=\"form-control\" type=\"text\" placeholder=\"Last Name\" v-model=\"last_name\">\n                                            </div>\n                                            <div class=\"col-md-6\">\n                                                <label>E-mail</label>\n                                                    <input class=\"form-control\" type=\"email\" placeholder=\"Email\" v-model=\"email\" disabled=\"true\">\n                                            </div>\n                                            <div class=\"col-md-6\">\n                                                <label>Mobile No</label>\n                                                    <input class=\"form-control\" type=\"text\" placeholder=\"Mobile\" v-model=\"phone_number\">\n                                            </div>\n                                            <div class=\"col-md-6\">\n                                                <label>Gender</label>\n                                                    <select name=\"gender\" class=\"form-control\" v-model=\"gender\">\n                                                        <option value=\"\" disabled=\"true\">--Select your Gender--</option>\n                                                        <option>Male</option>\n                                                        <option>Female</option>\n                                                        <option>Other</option>\n                                                    </select>\n                                            </div>                                    \n                                            <div class=\"col-md-6\">\n                                                <label>Address</label>\n                                                    <input class=\"form-control\" type=\"text\" placeholder=\"Address\" v-model=\"address\">\n                                            </div>\n                                            <div class=\"col-md-6\">\n                                                <label>City</label>\n                                                    <select name=\"city\" class=\"form-control\" v-model=\"city\">\n                                                        <option value=\"\" disabled=\"true\">--Select your City--</option>\n                                                        <option>Nairobi</option>\n                                                        <option>Kisumu</option>\n                                                        <option>Mombasa</option>\n                                                        <option>Nakuru</option>\n                                                    </select>\n                                            </div>\n                                            <div class=\"col-md-6\">\n                                                <label>County</label>\n                                                    <select name=\"county\" class=\"form-control\" v-model=\"county\">\n                                                        <option value=\"\" disabled=\"true\">--Select your County--</option>\n                                                        <option>Siaya</option>\n                                                        <option>Kisumu</option>\n                                                        <option>Nairobi</option>\n                                                        <option>Mombasa</option>\n                                                    </select>\n                                            </div>                                \n                                            <div class=\"col-md-12\">\n                                                <div class=\"custom-control custom-checkbox\">\n                                                    <input type=\"checkbox\" class=\"custom-control-input\" id=\"newaccount\">\n                                                    <label class=\"custom-control-label\" for=\"newaccount\">Create an account</label>\n                                                </div>\n                                            </div>\n                                            <div class=\"col-md-12\">\n                                                <div class=\"custom-control custom-checkbox\">\n                                                    <input type=\"checkbox\" class=\"custom-control-input\" id=\"shipto\" @click=\"showShippingDetails\">\n                                                    <label class=\"custom-control-label\" for=\"shipto\">Ship to different address</label>\n                                                    <div class=\"shipping-address\" v-if=\"checked\" >\n                                                        <h2>Shipping Address</h2>\n                                                        <div class=\"row\">\n                                                            <div class=\"col-md-6\">\n                                                                <label>First Name</label>\n                                                                <input class=\"form-control\" type=\"text\" placeholder=\"First Name\">\n                                                            </div>\n                                                            <div class=\"col-md-6\">\n                                                                <label>Last Name</label>\n                                                                <input class=\"form-control\" type=\"text\" placeholder=\"Last Name\">\n                                                            </div>\n                                                            <div class=\"col-md-6\">\n                                                                <label>E-mail</label>\n                                                                <input class=\"form-control\" type=\"text\" placeholder=\"E-mail\">\n                                                            </div>\n                                                            <div class=\"col-md-6\">\n                                                                <label>Mobile No</label>\n                                                                <input class=\"form-control\" type=\"text\" placeholder=\"Mobile No\">\n                                                            </div>\n                                                            <div class=\"col-md-12\">\n                                                                <label>Address</label>\n                                                                <input class=\"form-control\" type=\"text\" placeholder=\"Address\">\n                                                            </div>\n                                                            <div class=\"col-md-6\">\n                                                                <label>Country</label>\n                                                                <select class=\"custom-select\">\n                                                                    <option selected>Kenya</option>\n                                                                    <option>Tanzania</option>\n                                                                    <option>Uganda</option>\n                                                                    <option>Rwanda</option>\n                                                                </select>\n                                                            </div>\n                                                            <div class=\"col-md-6\">\n                                                                <label>City</label>\n                                                                <input class=\"form-control\" type=\"text\" placeholder=\"City\">\n                                                            </div>\n                                                            <div class=\"col-md-6\">\n                                                                <label>County</label>\n                                                                <input class=\"form-control\" type=\"text\" placeholder=\"County\">\n                                                            </div>\n                                                            <div class=\"col-md-6\">\n                                                                <label>ZIP Code</label>\n                                                                <input class=\"form-control\" type=\"text\" placeholder=\"ZIP Code\">\n                                                            </div>\n                                                        </div>\n                                                    </div>                                                \n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class=\"col-lg-4\">\n                                <div class=\"checkout-inner\">\n                                    <div class=\"checkout-summary\">\n                                        <h1>Cart Total</h1>\n                                        <p class=\"sub-total\">Sub Total<span>ksh. {{Number(cartSubTotal).toLocaleString()}}</span></p>\n                                        <p class=\"ship-cost\">Shipping Cost<span>ksh. {{Number(shippingCost).toLocaleString()}}</span></p>\n                                        <h2>Grand Total<span>{{Number(cartGrandTotal).toLocaleString()}}</span></h2>\n                                    </div>\n\n                                    <div class=\"checkout-payment\">\n                                    <h1>Payment Methods</h1>\n                                        <button type=\"button\" class=\"lipanampesa\" @click=\"showLipaNaMpesa\">Lipa Na Mpesa</button>\n                                        <div v-if=\"lipaNaMpesa\">\n                                            <p>To proceed to Lipa Na Mpesa, please enter the phone number you would like to make the payment with.</p>\n                                            <label for=\"\">Phone Number:</label>\n                                            <input type=\"text\" class=\"form-control\" placeholder=\"e.g 2547XXXXXXXX\" v-model=\"payment_number\">\n                                            <div class=\"col-md-12 notification is-danger\" v-if=\"errors.length\">\n                                                <p style=\"color: red;\" v-for=\"error in errors\" v-bind:key=\"error\">{{ error }}</p>\n                                            </div>\n                                            <button type=\"button\" class=\"procPayBtn\" @click=\"payViaMpesa\">Proceed to Pay</button>\n                                        </div>\n                                        <div id=\"paypal-button-container\"></div>\n                                        <div class=\"checkout-btn\" >\n                                            <button>Place Order</button>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>   \n                    </div>\n                </form>\n            </div>\n        </div>\n        <!-- Checkout End -->\n    </div>\n</template>\n\n<script>\nexport default {\n    props:['cartGrandTotal','cartItemTotal','cartSubTotal','shippingCost','cartTotalUSD'],\n    el:'#selector',\n    data(){\n        return{\n            cart:{\n                cartItems:[]\n            },\n            id:'',\n            first_name:'',\n            last_name: '',\n            email: '',\n            phone_number: '',\n            address: '',\n            county: '',\n            city: '',\n            gender: '',\n            errors:[],\n            lipaNaMpesa: false,\n            checked: false,\n            errors:[],\n            payment_number: ''\n        }\n    },\n    methods:{\n        getProfileDetails(){\n            this.axios.get('/api/v1/users/me/')\n            .then((response)=>{\n                this.phone_number = response.data.phone_number;\n                this.email = response.data.email;\n                this.id = response.data.id;\n                this.first_name = response.data.first_name\n                this.last_name = response.data.last_name\n                this.gender = response.data.gender\n                this.city = response.data.city\n                this.county = response.data.county\n                this.address = response.data.address\n            })\n            .catch((error)=>{\n\n            })\n        },\n        payViaMpesa(){\n            this.errors = []\n            if(this.payment_number === ''){\n                this.errors.push('Please enter phone number');\n                this.$toast.error('Invalid phone number', {\n                    duration: 3000\n                })\n            }\n            if(!this.errors.length){\n                let headers = new Headers();\n                headers.append(\"Content-Type\", \"application/json\");\n                headers.append(\"Authorization\", \"Bearer rzNoq74BaMUOaGGOwPpeUt3BKMlT\");\n                const formData = {\n                    \"BusinessShortCode\": 174379,\n                    \"Password\": \"MTc0Mzc5YmZiMjc5ZjlhYTliZGJjZjE1OGU5N2RkNzFhNDY3Y2QyZTBjODkzMDU5YjEwZjc4ZTZiNzJhZGExZWQyYzkxOTIwMjIwNDIxMTcxODIy\",\n                    \"Timestamp\": \"20220421171822\",\n                    \"TransactionType\": \"CustomerPayBillOnline\",\n                    \"Amount\": 1,\n                    \"PartyA\": this.payment_number,\n                    \"PartyB\": 174379,\n                    \"PhoneNumber\": this.payment_number,\n                    \"CallBackURL\": \"https://478f-197-248-34-79.ngrok.io/api/v1/c2b/callback\",\n                    \"AccountReference\": \"Gee Collections\",\n                    \"TransactionDesc\": \"Payment of X\"\n                }\n                this.axios.post('https://sandbox.safaricom.co.ke/mpesa/stkpush/v1/processrequest',headers,formData)\n                .then((response)=>{\n                    console.log(response.data)\n                })\n                .catch((error)=>{\n                    console.log(error)\n                })\n            }\n        },\n        placeOrder(){\n            const items = []\n            for (let i = 0; i < this.cart.cartItems.length; i++) {\n            const item = this.cart.cartItems[i]\n            const obj = {\n                product: item.items.id,\n                quantity: item.quantity,\n                price: item.items.price * item.quantity\n            }\n            items.push(obj)\n            \n            }           \n            let formData={\n                first_name:this.first_name,\n                last_name: this.last_name,\n                address: this.address,\n                county: this.county,\n                city: this.city,   \n                phone_number: this.phone_number,\n                email: this.email,\n                items: items,\n                order_total: this.cartSubTotal,\n            }\n            console.log(formData)\n            this.axios.post('/api/v1/checkout/', formData)\n            .then((response)=>{\n                console.log(response.data)\n                this.$store.commit('clearCart')\n                this.$toast.success('Order succesfully placed')\n                this.$router.push('/')\n                this.$store.commit('reloadingPage')\n                this.$router.push('/')\n            })\n            .catch((error)=>{\n                console.log(error)\n            })\n        },\n        showLipaNaMpesa(){\n            this.lipaNaMpesa = !this.lipaNaMpesa\n        },\n        showShippingDetails(){\n            this.checked = !this.checked\n            console.log(this.checked)\n        },\n        mountPaypalButton(){\n\n        }\n    },\n    beforeMount() {\n        this.getProfileDetails();\n        this.cart = this.$store.state.cart;\n    },\n    mounted(){\n        paypal.Buttons({\n            //Styling the paypal button\n            style: {\n                color: 'blue',\n                shape: 'pill',\n                label: 'pay',\n                height: 40\n            },\n            // Sets up the transaction when a payment button is clicked\n            createOrder: (data, actions) => {\n            return actions.order.create({\n                purchase_units: [{\n                amount: {\n                    value: this.cartTotalUSD // Can also reference a variable or function\n                }\n                }]\n            });\n            },\n            // Finalize the transaction after payer approval\n            onApprove: (data, actions) => {\n            return actions.order.capture().then(function(orderData) {\n                // Successful capture! For dev/demo purposes:\n                console.log('Capture result', orderData, JSON.stringify(orderData, null, 2));\n                const transaction = orderData.purchase_units[0].payments.captures[0];\n                alert(`Transaction ${transaction.status}: ${transaction.id}\\n\\nSee console for all available details`);\n                // When ready to go live, remove the alert and show a success message within this page. For example:\n                // const element = document.getElementById('paypal-button-container');\n                // element.innerHTML = '<h3>Thank you for your payment!</h3>';\n                // Or go to another URL:  actions.redirect('thank_you.html');\n            });\n            }\n        }).render('#paypal-button-container');\n    }\n}\n\n</script>\n\n<style scoped>\n    input{\n        font-weight: 300;\n        color: black;\n    }\n    select{\n        font-weight: 300;\n        color: black;\n    }\n    .lipanampesa{\n        width: 100%;\n        height: 40px;\n        padding: 2px 10px;\n        font-family: 'Source Code Pro', monospace;\n        font-weight: 700;\n        font-size: 18px;\n        text-align: center;\n        color: #000000;\n        background: #228B22;\n        border: none;\n        transition: all .3s;\n        margin-bottom: 20px;\n        border-radius: 6%;\n    }\n    .lipanampesa:hover{\n        background-color: black;\n        color: green;\n    }\n    .procPayBtn{\n        margin: 20px;\n        color:#228B22;\n        background-color: black;\n        border: none;\n        border-radius: 4px;\n        transition: all .3s;\n        font-weight: 700;\n        font-size: 18px;\n    }\n    .procPayBtn:hover{\n        color: white;\n        background-color: green;\n    }\n</style>"]},"metadata":{},"sourceType":"module"}